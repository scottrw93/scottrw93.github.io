{"version":3,"sources":["js/api/HomeWallApi.js","media/wall.jpg","js/components/Board.js","js/components/ProblemEditor.js","js/utils/RayCasting.js","js/components/ProblemList.js","js/components/BoardEditor.js","js/components/HomeWall.js","js/App.js","index.js"],"names":["HOMEWALL_API","SCREEN_FACTOR","window","matchMedia","matches","draw","holds","ctx","factor","forEach","points","beginPath","moveTo","x","y","i","length","lineTo","stroke","closePath","Board","props","canvasRef","React","createRef","this","current","getContext","wallImg","Image","src","wall","onload","width","height","drawImage","clientWidth","clientHeight","lineWidth","strokeStyle","setState","loading","prevProps","onClick","className","ref","onMouseDown","clientX","clientY","canvas","getBoundingClientRect","left","top","PureComponent","useStyles","makeStyles","theme","root","display","flexWrap","justifyContent","overflow","backgroundColor","palette","background","paper","formControl","margin","spacing","minWidth","selectEmpty","marginTop","ProblemEditor","selectedHolds","wallKey","addHold","saveProblem","classes","useState","grade","setGrade","name","setName","author","setAuthor","disabled","CssBaseline","Container","maxWidth","TextField","label","variant","onChange","value","target","defaultValue","FormControl","InputLabel","Select","MenuItem","Button","color","ProblemEditorContainer","state","bind","allHolds","hold","point","vs","inside","j","xi","yi","xj","yj","indexOf","problem","createProblem","card","position","marginBottom","overlay","bottom","opacity","description","padding","ProblemList","problems","map","Typography","BoardEditor","handleClick","createHold","saveBoard","BoardEditorContainer","updateHolds","drawerWidth","drawer","breakpoints","up","flexShrink","appBar","marginLeft","menuButton","marginRight","toolbar","mixins","drawerPaper","content","flexGrow","SideBar","page","setPage","Divider","ListItem","button","selected","ListItemIcon","ListItemText","primary","TopBar","fullWidth","handleDrawerToggle","AppBar","Toolbar","IconButton","aria-label","edge","noWrap","HomeWall","useTheme","mobileOpen","setMobileOpen","Hidden","smUp","implementation","Drawer","anchor","direction","open","onClose","ModalProps","keepMounted","updatedPage","xsDown","HomeWallContainer","fetch","then","res","json","result","error","console","method","body","JSON","stringify","createdProblem","upsertHolds","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.e3e98d1a.chunk.js","sourcesContent":["const HOMEWALL_API = 'https://europe-west3-homewall-301021.cloudfunctions.net/HomeWall';\n//const HOMEWALL_API = 'http://localhost:8080';\n\nexport const fetchProblems = () => {\n  return fetch(`${HOMEWALL_API}/problems`)\n    .then((res) => res.json())\n    .then(\n      (result) => {\n        return result;\n      },\n      (error) => {\n        console.error({ error });\n      },\n    );\n};\n\nexport const fetchHolds = () => {\n  return fetch(`${HOMEWALL_API}/holds`)\n    .then((res) => res.json())\n    .then(\n      (result) => {\n        return result;\n      },\n      (error) => {\n        console.error({ error });\n      },\n    );\n};\n\nexport const upsertHolds = (holds) => {\n  return fetch(`${HOMEWALL_API}/holds`, {\n    method: 'PUT',\n    body: JSON.stringify(holds),\n  })\n    .then((res) => res.json())\n    .then(\n      (result) => {\n        return result;\n      },\n      (error) => {\n        console.error({ error });\n      },\n    );\n};\n\nexport const createProblem = (problem) => {\n  return fetch(`${HOMEWALL_API}/problems`, {\n    method: 'POST',\n    body: JSON.stringify(problem),\n  })\n    .then((res) => res.json())\n    .then(\n      (result) => {\n        return result;\n      },\n      (error) => {\n        console.error({ error });\n      },\n    );\n};\n","export default __webpack_public_path__ + \"static/media/wall.27c8fb8f.jpg\";","import React from 'react';\n\nimport wall from '../../media/wall.jpg';\n\nconst WIDTH = 600;\nconst SCREEN_FACTOR = window.matchMedia\n  ? window.matchMedia('screen and (max-width: 600px)').matches\n    ? 2\n    : 1\n  : 1;\n\nconst draw = (holds, ctx, factor) => {\n  holds.forEach((points) => {\n    ctx.beginPath();\n    ctx.moveTo(points[0].x / factor, points[0].y / factor);\n    for (let i = 1; i < points.length; i++) {\n      ctx.lineTo(points[i].x / factor, points[i].y / factor);\n    }\n    ctx.lineTo(points[0].x / factor, points[0].y / factor);\n\n    ctx.stroke();\n    ctx.closePath();\n  });\n};\n\nclass Board extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.canvasRef = React.createRef();\n  }\n\n  componentDidMount() {\n    const ctx = this.canvasRef.current.getContext('2d');\n    const wallImg = new Image();\n\n    wallImg.src = wall;\n\n    wallImg.onload = () => {\n      if (!this.canvasRef.current) {\n        return;\n      }\n      const { width, height } = wallImg;\n      this.canvasRef.current.height = height / (width / WIDTH) / SCREEN_FACTOR;\n\n      ctx.drawImage(\n        wallImg,\n        0,\n        0,\n        this.canvasRef.current.clientWidth,\n        this.canvasRef.current.clientHeight,\n      );\n      ctx.lineWidth = 2;\n      ctx.strokeStyle = '#FFFFFF';\n\n      draw(this.props.holds, ctx, SCREEN_FACTOR);\n      this.setState({\n        loading: true,\n      });\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.holds !== this.props.holds) {\n      const ctx = this.canvasRef.current.getContext('2d');\n\n      draw(this.props.holds, ctx, SCREEN_FACTOR);\n    }\n  }\n\n  render() {\n    const { onClick } = this.props;\n\n    return (\n      <canvas\n        className=\"home-wall-canvas\"\n        width={WIDTH / SCREEN_FACTOR}\n        ref={this.canvasRef}\n        onMouseDown={({ clientX, clientY }) => {\n          if (onClick) {\n            const canvas = this.canvasRef.current.getBoundingClientRect();\n\n            const x = clientX - canvas.left;\n            const y = clientY - canvas.top;\n            onClick({ x: x * SCREEN_FACTOR, y: y * SCREEN_FACTOR });\n          }\n        }}\n      />\n    );\n  }\n}\n\nexport default Board;\n","import React from 'react';\nimport Board from './Board';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { Button } from '@material-ui/core';\nimport { TextField } from '@material-ui/core';\nimport { MenuItem, FormControl, InputLabel, Select } from '@material-ui/core';\nimport { inside } from '../utils/RayCasting';\n\nimport Container from '@material-ui/core/Container';\nimport CssBaseline from '@material-ui/core/CssBaseline';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n    flexWrap: 'wrap',\n    justifyContent: 'space-around',\n    overflow: 'hidden',\n    backgroundColor: theme.palette.background.paper,\n  },\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120,\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2),\n  },\n}));\n\nconst ProblemEditor = ({ selectedHolds, wallKey, addHold, saveProblem }) => {\n  const classes = useStyles();\n\n  const [grade, setGrade] = React.useState('6B');\n  const [name, setName] = React.useState(null);\n  const [author, setAuthor] = React.useState('Scott Williams');\n  const disabled = selectedHolds.length < 3 || !name || !author || !grade;\n\n  return (\n    <div className={classes.root}>\n      <CssBaseline />\n      <Container maxWidth=\"sm\">\n        <Board key={wallKey} onClick={addHold} holds={selectedHolds} />\n        <div>\n          <TextField\n            className={classes.formControl}\n            label=\"Problem Name\"\n            variant=\"outlined\"\n            onChange={({ target: { value } }) => setName(value)}\n          />\n          <TextField\n            className={classes.formControl}\n            label=\"Author\"\n            defaultValue={author}\n            variant=\"outlined\"\n            onChange={({ target: { value } }) => setAuthor(value)}\n          />\n\n          <FormControl variant=\"outlined\" className={classes.formControl}>\n            <InputLabel>Grade</InputLabel>\n            <Select\n              value={grade}\n              onChange={({ target: { value } }) => setGrade(value)}\n              label=\"Grade\"\n            >\n              <MenuItem value=\"None\">None</MenuItem>\n              <MenuItem value=\"6B\">6B</MenuItem>\n              <MenuItem value=\"7A\">7A</MenuItem>\n              <MenuItem value=\"8A\">8A</MenuItem>\n            </Select>\n          </FormControl>\n        </div>\n        <Button\n          className={classes.formControl}\n          variant=\"contained\"\n          color=\"primary\"\n          onClick={() =>\n            saveProblem({\n              name,\n              grade,\n              author,\n              holds: selectedHolds,\n            })\n          }\n          disabled={disabled}\n        >\n          Save problem\n        </Button>\n      </Container>\n    </div>\n  );\n};\n\nclass ProblemEditorContainer extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      selectedHolds: [],\n      wallKey: 0,\n    };\n\n    this.addHold = this.addHold.bind(this);\n    this.saveProblem = this.saveProblem.bind(this);\n  }\n\n  addHold({ x, y }) {\n    const { allHolds } = this.props;\n    const { selectedHolds } = this.state;\n\n    allHolds.forEach((hold) => {\n      if (inside({ x, y }, hold)) {\n        if (selectedHolds.indexOf(hold) === -1) {\n          this.setState({\n            selectedHolds: [...selectedHolds, hold],\n          });\n        }\n      }\n    });\n  }\n\n  saveProblem(problem) {\n    const { createProblem } = this.props;\n\n    createProblem(problem);\n\n    this.setState({\n      selectedHolds: [],\n      wallKey: this.state.wallKey + 1, //TODO: hack to force rerender, refactor\n    });\n  }\n\n  render() {\n    const { selectedHolds, wallKey } = this.state;\n\n    return (\n      <ProblemEditor\n        selectedHolds={selectedHolds}\n        wallKey={wallKey}\n        addHold={this.addHold}\n        saveProblem={this.saveProblem}\n      />\n    );\n  }\n}\n\nexport default ProblemEditorContainer;\n","export const inside = (point, vs) => {\n  const x = point.x,\n    y = point.y;\n\n  let inside = false;\n  for (let i = 0, j = vs.length - 1; i < vs.length; j = i++) {\n    const xi = vs[i].x,\n      yi = vs[i].y;\n    const xj = vs[j].x,\n      yj = vs[j].y;\n\n    // eslint-disable-next-line\n    const intersect = yi > y !== yj > y && x < ((xj - xi) * (y - yi)) / (yj - yi) + xi;\n    if (intersect) inside = !inside;\n  }\n\n  return inside;\n};\n","import React from 'react';\nimport Board from './Board';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n    flexWrap: 'wrap',\n    justifyContent: 'space-around',\n    overflow: 'hidden',\n    backgroundColor: theme.palette.background.paper,\n  },\n  card: {\n    position: 'relative',\n    marginBottom: '50px',\n    display: 'inline-block',\n    backgroundColor: 'black',\n  },\n  overlay: {\n    position: 'absolute',\n    bottom: '0',\n    left: '0',\n    width: '100%',\n    color: 'white',\n    backgroundColor: 'black',\n    opacity: 0.6,\n  },\n  description: {\n    padding: '10px 10px 10px 10px',\n  },\n}));\n\nconst ProblemList = ({ problems }) => {\n  const classes = useStyles();\n\n  if (problems.length === 0) {\n    return (\n      <div className={classes.root}>\n        <CssBaseline />\n        <Container maxWidth=\"sm\">\n          <div className={classes.root}>No problems created yet</div>\n        </Container>\n      </div>\n    );\n  }\n\n  return (\n    <div className={classes.root}>\n      <CssBaseline />\n      <Container maxWidth=\"sm\">\n        {problems.map(({ holds, name, grade, author }) => (\n          <div className={classes.card}>\n            <Board holds={holds} />\n            <div className={classes.overlay}>\n              <div className={classes.description}>\n                <Typography variant=\"h5\">{`${name} ${grade}`}</Typography>\n                <Typography variant=\"body1\">{`by: ${author}`}</Typography>\n              </div>\n            </div>\n          </div>\n        ))}\n      </Container>\n    </div>\n  );\n};\n\nexport default ProblemList;\n","import React from 'react';\n\nimport Board from './Board';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { Button } from '@material-ui/core';\nimport { TextField } from '@material-ui/core';\nimport { MenuItem, FormControl, InputLabel, Select } from '@material-ui/core';\nimport { inside } from '../utils/RayCasting';\n\nimport Container from '@material-ui/core/Container';\nimport CssBaseline from '@material-ui/core/CssBaseline';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n    flexWrap: 'wrap',\n    justifyContent: 'space-around',\n    overflow: 'hidden',\n    backgroundColor: theme.palette.background.paper,\n  },\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120,\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2),\n  },\n}));\n\nconst BoardEditor = ({ holds, handleClick, createHold, saveBoard }) => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n      <CssBaseline />\n      <Container maxWidth=\"sm\">\n        <div className=\"home-wall\">\n          <Board onClick={handleClick} holds={holds} />\n        </div>\n        <Button\n          className={classes.formControl}\n          variant=\"contained\"\n          color=\"secondary\"\n          onClick={createHold}\n        >\n          Create hold\n        </Button>\n\n        <Button\n          className={classes.formControl}\n          variant=\"contained\"\n          color=\"primary\"\n          onClick={saveBoard}\n        >\n          Save board\n        </Button>\n      </Container>\n    </div>\n  );\n};\n\nclass BoardEditorContainer extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      points: [],\n      holds: [],\n    };\n\n    this.handleClick = this.handleClick.bind(this);\n    this.createHold = this.createHold.bind(this);\n  }\n\n  handleClick({ x, y }) {\n    this.setState({\n      points: [...this.state.points, { x, y }],\n    });\n  }\n\n  createHold() {\n    const { points } = this.state;\n\n    if (points.length < 3) {\n      return;\n    }\n\n    this.setState({\n      holds: [...this.state.holds, points],\n      points: [],\n    });\n  }\n\n  render() {\n    const { updateHolds } = this.props;\n\n    return (\n      <BoardEditor\n        holds={this.state.holds}\n        handleClick={this.handleClick}\n        createHold={this.createHold}\n        saveBoard={() => updateHolds(this.state.holds)}\n      />\n    );\n  }\n}\n\nexport default BoardEditorContainer;\n","import React from 'react';\nimport { fetchHolds, fetchProblems, upsertHolds, createProblem } from '../api/HomeWallApi';\nimport ProblemEditor from './ProblemEditor';\nimport ProblemList from './ProblemList';\nimport BoardEditor from './BoardEditor';\n\nimport CreateIcon from '@material-ui/icons/Create';\nimport AppBar from '@material-ui/core/AppBar';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Divider from '@material-ui/core/Divider';\nimport Drawer from '@material-ui/core/Drawer';\nimport Hidden from '@material-ui/core/Hidden';\nimport IconButton from '@material-ui/core/IconButton';\nimport ListIcon from '@material-ui/icons/List';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\n\nconst drawerWidth = 240;\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n  },\n  drawer: {\n    [theme.breakpoints.up('sm')]: {\n      width: drawerWidth,\n      flexShrink: 0,\n    },\n  },\n  appBar: {\n    [theme.breakpoints.up('sm')]: {\n      width: `calc(100% - ${drawerWidth}px)`,\n      marginLeft: drawerWidth,\n    },\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n    [theme.breakpoints.up('sm')]: {\n      display: 'none',\n    },\n  },\n  toolbar: theme.mixins.toolbar,\n  drawerPaper: {\n    width: drawerWidth,\n  },\n  content: {\n    flexGrow: 1,\n    padding: theme.spacing(3),\n  },\n}));\n\nconst SideBar = ({ page, setPage }) => {\n  const classes = useStyles();\n\n  return (\n    <div>\n      <div className={classes.toolbar} />\n      <Divider />\n      <List>\n        <ListItem button onClick={() => setPage('create')} selected={page === 'create'}>\n          <ListItemIcon>\n            <CreateIcon />\n          </ListItemIcon>\n          <ListItemText primary={'Create problem'} />\n        </ListItem>\n        <ListItem button onClick={() => setPage('list')} selected={page === 'list'}>\n          <ListItemIcon>\n            <ListIcon />\n          </ListItemIcon>\n          <ListItemText primary={'Existing problems'} />\n        </ListItem>\n      </List>\n    </div>\n  );\n};\n\nconst TopBar = ({ fullWidth = false, handleDrawerToggle }) => {\n  const classes = useStyles();\n\n  return (\n    <div>\n      <AppBar position=\"fixed\" className={fullWidth ? null : classes.appBar}>\n        <Toolbar>\n          <IconButton\n            color=\"inherit\"\n            aria-label=\"open drawer\"\n            edge=\"start\"\n            onClick={handleDrawerToggle}\n            className={classes.menuButton}\n          >\n            <MenuIcon />\n          </IconButton>\n          <Typography variant=\"h6\" noWrap>\n            Home Wall\n          </Typography>\n        </Toolbar>\n      </AppBar>\n    </div>\n  );\n};\n\nconst HomeWall = ({ problems, holds, createProblem, loading, updateHolds }) => {\n  const classes = useStyles();\n  const theme = useTheme();\n\n  const [mobileOpen, setMobileOpen] = React.useState(false);\n  const [page, setPage] = React.useState('list');\n\n  const handleDrawerToggle = () => {\n    setMobileOpen(!mobileOpen);\n  };\n\n  if (holds.length === 0) {\n    return (\n      <div className={classes.root}>\n        <CssBaseline />\n        <TopBar handleDrawerToggle={handleDrawerToggle} fullWidth />\n        <main className={classes.content}>\n          <div className={classes.toolbar} />\n          {!loading && <BoardEditor updateHolds={updateHolds} />}\n        </main>\n      </div>\n    );\n  }\n\n  return (\n    <div className={classes.root}>\n      <CssBaseline />\n      <TopBar handleDrawerToggle={handleDrawerToggle} />\n\n      <nav className={classes.drawer} aria-label=\"mailbox folders\">\n        <Hidden smUp implementation=\"css\">\n          <Drawer\n            variant=\"temporary\"\n            anchor={theme.direction === 'rtl' ? 'right' : 'left'}\n            open={mobileOpen}\n            onClose={handleDrawerToggle}\n            classes={{\n              paper: classes.drawerPaper,\n            }}\n            ModalProps={{\n              keepMounted: true,\n            }}\n          >\n            <SideBar\n              setPage={(updatedPage) => {\n                setPage(updatedPage);\n                setMobileOpen(false);\n              }}\n            />\n          </Drawer>\n        </Hidden>\n        <Hidden xsDown implementation=\"css\">\n          <Drawer\n            classes={{\n              paper: classes.drawerPaper,\n            }}\n            variant=\"permanent\"\n            open\n          >\n            <SideBar page={page} setPage={setPage} />\n          </Drawer>\n        </Hidden>\n      </nav>\n      <main className={classes.content}>\n        <div className={classes.toolbar} />\n        {page === 'list' && <ProblemList problems={problems} />}\n        {page === 'create' && <ProblemEditor allHolds={holds} createProblem={createProblem} />}\n      </main>\n    </div>\n  );\n};\n\nclass HomeWallContainer extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      loading: true,\n      holds: [],\n      problems: [],\n    };\n\n    this.updateHolds = this.updateHolds.bind(this);\n    this.createProblem = this.createProblem.bind(this);\n  }\n\n  componentDidMount() {\n    fetchProblems().then((problems) => {\n      this.setState({\n        problems,\n        holds: fetchHolds(),\n        loading: false,\n      });\n    });\n  }\n\n  createProblem(problem) {\n    createProblem(problem).then((createdProblem) =>\n      this.setState({\n        problems: [createdProblem, ...this.state.problems],\n      }),\n    );\n  }\n\n  updateHolds(holds) {\n    upsertHolds(holds).then((holds) =>\n      this.setState({\n        holds,\n      }),\n    );\n  }\n\n  render() {\n    return (\n      <HomeWall\n        problems={this.state.problems}\n        holds={this.state.holds}\n        createProblem={this.createProblem}\n        updateHolds={this.updateHolds}\n        loading={this.state.loading}\n      />\n    );\n  }\n}\n\nexport default HomeWallContainer;\n","import '../css/App.css';\n\nimport HomeWall from './components/HomeWall';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <HomeWall />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './css/index.css';\nimport App from './js/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}