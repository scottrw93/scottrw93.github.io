{"version":3,"sources":["js/api/HomeWallApi.js","media/wall.jpg","js/components/Board.js","js/components/ProblemEditor.js","js/utils/RayCasting.js","js/components/ProblemList.js","js/components/BoardEditor.js","js/components/HomeWall.js","js/App.js","index.js"],"names":["HOMEWALL_API","SCREEN_FACTOR","window","matchMedia","matches","pointAt","corrodinate","devicePixelRatio","drawHolds","holds","context","forEach","points","beginPath","x0","x","y0","y","moveTo","lineTo","stroke","closePath","Board","props","canvasRef","React","createRef","this","ref","current","getContext","wallImg","Image","src","wall","onload","height","width","style","drawImage","lineWidth","strokeStyle","prevProps","onClick","dotOnClick","onMouseDown","clientX","clientY","canvas","getBoundingClientRect","left","top","strokeRect","drawDot","PureComponent","useStyles","makeStyles","theme","root","display","flexWrap","justifyContent","overflow","backgroundColor","palette","background","paper","formControl","margin","spacing","minWidth","selectEmpty","marginTop","ProblemEditor","selectedHolds","wallKey","addHold","saveProblem","classes","useState","grade","setGrade","name","setName","author","setAuthor","disabled","length","className","CssBaseline","Container","maxWidth","TextField","label","variant","onChange","value","target","defaultValue","FormControl","InputLabel","Select","MenuItem","Button","color","ProblemEditorContainer","state","bind","allHolds","hold","point","vs","inside","i","j","xi","yi","xj","yj","indexOf","setState","problem","createProblem","card","position","marginBottom","overlay","bottom","opacity","description","padding","ProblemList","problems","map","Typography","BoardEditor","handleClick","createHold","saveBoard","BoardEditorContainer","updateHolds","drawerWidth","drawer","breakpoints","up","flexShrink","appBar","marginLeft","menuButton","marginRight","toolbar","mixins","drawerPaper","content","flexGrow","SideBar","page","setPage","Divider","ListItem","button","selected","ListItemIcon","ListItemText","primary","TopBar","fullWidth","handleDrawerToggle","AppBar","Toolbar","IconButton","aria-label","edge","noWrap","HomeWall","loading","useTheme","mobileOpen","setMobileOpen","Hidden","smUp","implementation","Drawer","anchor","direction","open","onClose","ModalProps","keepMounted","updatedPage","xsDown","HomeWallContainer","fetch","then","res","json","result","error","console","method","body","JSON","stringify","createdProblem","upsertHolds","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.bb909ac4.chunk.js","sourcesContent":["const HOMEWALL_API = 'https://europe-west3-homewall-301021.cloudfunctions.net/HomeWall';\n//const HOMEWALL_API = 'http://localhost:8080';\n\nexport const fetchProblems = () => {\n  return fetch(`${HOMEWALL_API}/problems`)\n    .then((res) => res.json())\n    .then(\n      (result) => {\n        return result;\n      },\n      (error) => {\n        console.error({ error });\n      },\n    );\n};\n\nexport const fetchHolds = () => {\n  return fetch(`${HOMEWALL_API}/holds`)\n    .then((res) => res.json())\n    .then(\n      (result) => {\n        return result;\n      },\n      (error) => {\n        console.error({ error });\n      },\n    );\n};\n\nexport const upsertHolds = (holds) => {\n  return fetch(`${HOMEWALL_API}/holds`, {\n    method: 'PUT',\n    body: JSON.stringify(holds),\n  })\n    .then((res) => res.json())\n    .then(\n      (result) => {\n        return result;\n      },\n      (error) => {\n        console.error({ error });\n      },\n    );\n};\n\nexport const createProblem = (problem) => {\n  return fetch(`${HOMEWALL_API}/problems`, {\n    method: 'POST',\n    body: JSON.stringify(problem),\n  })\n    .then((res) => res.json())\n    .then(\n      (result) => {\n        return result;\n      },\n      (error) => {\n        console.error({ error });\n      },\n    );\n};\n","export default __webpack_public_path__ + \"static/media/wall.ecca603c.jpg\";","import React from 'react';\n\nimport wall from '../../media/wall.jpg';\n\nconst WIDTH = 600;\nconst SCREEN_FACTOR = window.matchMedia\n  ? window.matchMedia('screen and (max-width: 600px)').matches\n    ? 2.1\n    : 1\n  : 1;\n\nconst pointAt = (corrodinate) => (corrodinate / SCREEN_FACTOR) * window.devicePixelRatio;\n\nconst drawDot = (x, y, context) => context.strokeRect(pointAt(x), pointAt(y), 1, 1);\n\nconst drawHolds = (holds, context) => {\n  holds.forEach((points) => {\n    context.beginPath();\n\n    const { x: x0, y: y0 } = points[0];\n\n    context.moveTo(pointAt(x0), pointAt(y0));\n\n    points.forEach(({ x, y }) => context.lineTo(pointAt(x), pointAt(y)));\n    context.lineTo(pointAt(x0), pointAt(y0));\n\n    context.stroke();\n    context.closePath();\n  });\n};\n\nclass Board extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.canvasRef = React.createRef();\n  }\n\n  componentDidMount() {\n    const { holds } = this.props;\n    const ref = this.canvasRef.current;\n    const context = ref.getContext('2d');\n    const wallImg = new Image();\n\n    wallImg.src = wall;\n\n    wallImg.onload = () => {\n      const height = wallImg.height / (wallImg.width / WIDTH) / SCREEN_FACTOR;\n      const width = WIDTH / SCREEN_FACTOR;\n\n      ref.width = width * window.devicePixelRatio;\n      ref.height = height * window.devicePixelRatio;\n\n      ref.style.width = `${width}px`;\n      ref.style.height = `${height}px`;\n\n      context.drawImage(wallImg, 0, 0, ref.width, ref.height);\n      context.lineWidth = 2;\n      context.strokeStyle = '#FFFFFF';\n\n      drawHolds(holds, context);\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.holds !== this.props.holds) {\n      drawHolds(this.props.holds, this.canvasRef.current.getContext('2d'));\n    }\n  }\n\n  render() {\n    const { onClick, dotOnClick = false } = this.props;\n\n    return (\n      <canvas\n        ref={this.canvasRef}\n        onMouseDown={({ clientX, clientY }) => {\n          if (onClick) {\n            const ref = this.canvasRef.current;\n            const context = ref.getContext('2d');\n            const canvas = ref.getBoundingClientRect();\n\n            const x = clientX - canvas.left;\n            const y = clientY - canvas.top;\n\n            if (dotOnClick) {\n              drawDot(x, y, context);\n            }\n\n            onClick({ x: x * SCREEN_FACTOR, y: y * SCREEN_FACTOR });\n          }\n        }}\n      />\n    );\n  }\n}\n\nexport default Board;\n","import React from 'react';\nimport Board from './Board';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { Button } from '@material-ui/core';\nimport { TextField } from '@material-ui/core';\nimport { MenuItem, FormControl, InputLabel, Select } from '@material-ui/core';\nimport { inside } from '../utils/RayCasting';\n\nimport Container from '@material-ui/core/Container';\nimport CssBaseline from '@material-ui/core/CssBaseline';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n    flexWrap: 'wrap',\n    justifyContent: 'space-around',\n    overflow: 'hidden',\n    backgroundColor: theme.palette.background.paper,\n  },\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120,\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2),\n  },\n}));\n\nconst ProblemEditor = ({ selectedHolds, wallKey, addHold, saveProblem }) => {\n  const classes = useStyles();\n\n  const [grade, setGrade] = React.useState('6B');\n  const [name, setName] = React.useState(null);\n  const [author, setAuthor] = React.useState('Scott Williams');\n  const disabled = selectedHolds.length < 3 || !name || !author || !grade;\n\n  return (\n    <div className={classes.root}>\n      <CssBaseline />\n      <Container maxWidth=\"sm\">\n        <Board key={wallKey} onClick={addHold} holds={selectedHolds} />\n        <div>\n          <TextField\n            className={classes.formControl}\n            label=\"Problem Name\"\n            variant=\"outlined\"\n            onChange={({ target: { value } }) => setName(value)}\n          />\n          <TextField\n            className={classes.formControl}\n            label=\"Author\"\n            defaultValue={author}\n            variant=\"outlined\"\n            onChange={({ target: { value } }) => setAuthor(value)}\n          />\n\n          <FormControl variant=\"outlined\" className={classes.formControl}>\n            <InputLabel>Grade</InputLabel>\n            <Select\n              value={grade}\n              onChange={({ target: { value } }) => setGrade(value)}\n              label=\"Grade\"\n            >\n              <MenuItem value=\"None\">None</MenuItem>\n              <MenuItem value=\"6B\">6B</MenuItem>\n              <MenuItem value=\"7A\">7A</MenuItem>\n              <MenuItem value=\"8A\">8A</MenuItem>\n            </Select>\n          </FormControl>\n        </div>\n        <Button\n          className={classes.formControl}\n          variant=\"contained\"\n          color=\"primary\"\n          onClick={() =>\n            saveProblem({\n              name,\n              grade,\n              author,\n              holds: selectedHolds,\n            })\n          }\n          disabled={disabled}\n        >\n          Save problem\n        </Button>\n      </Container>\n    </div>\n  );\n};\n\nclass ProblemEditorContainer extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      selectedHolds: [],\n      wallKey: 0,\n    };\n\n    this.addHold = this.addHold.bind(this);\n    this.saveProblem = this.saveProblem.bind(this);\n  }\n\n  addHold({ x, y }) {\n    const { allHolds } = this.props;\n    const { selectedHolds } = this.state;\n\n    allHolds.forEach((hold) => {\n      if (inside({ x, y }, hold)) {\n        if (selectedHolds.indexOf(hold) === -1) {\n          this.setState({\n            selectedHolds: [...selectedHolds, hold],\n          });\n        }\n      }\n    });\n  }\n\n  saveProblem(problem) {\n    const { createProblem } = this.props;\n\n    createProblem(problem);\n\n    this.setState({\n      selectedHolds: [],\n      wallKey: this.state.wallKey + 1, //TODO: hack to force rerender, refactor\n    });\n  }\n\n  render() {\n    const { selectedHolds, wallKey } = this.state;\n\n    return (\n      <ProblemEditor\n        selectedHolds={selectedHolds}\n        wallKey={wallKey}\n        addHold={this.addHold}\n        saveProblem={this.saveProblem}\n      />\n    );\n  }\n}\n\nexport default ProblemEditorContainer;\n","export const inside = (point, vs) => {\n  const x = point.x,\n    y = point.y;\n\n  let inside = false;\n  for (let i = 0, j = vs.length - 1; i < vs.length; j = i++) {\n    const xi = vs[i].x,\n      yi = vs[i].y;\n    const xj = vs[j].x,\n      yj = vs[j].y;\n\n    // eslint-disable-next-line\n    const intersect = yi > y !== yj > y && x < ((xj - xi) * (y - yi)) / (yj - yi) + xi;\n    if (intersect) inside = !inside;\n  }\n\n  return inside;\n};\n","import React from 'react';\nimport Board from './Board';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n    flexWrap: 'wrap',\n    justifyContent: 'space-around',\n    overflow: 'hidden',\n    backgroundColor: theme.palette.background.paper,\n  },\n  card: {\n    position: 'relative',\n    marginBottom: '50px',\n    display: 'inline-block',\n    backgroundColor: 'black',\n  },\n  overlay: {\n    position: 'absolute',\n    bottom: '0',\n    left: '0',\n    width: '100%',\n    color: 'white',\n    backgroundColor: 'black',\n    opacity: 0.6,\n  },\n  description: {\n    padding: '10px 10px 10px 10px',\n  },\n}));\n\nconst ProblemList = ({ problems }) => {\n  const classes = useStyles();\n\n  if (problems.length === 0) {\n    return (\n      <div className={classes.root}>\n        <CssBaseline />\n        <Container maxWidth=\"sm\">\n          <div className={classes.root}>No problems created yet</div>\n        </Container>\n      </div>\n    );\n  }\n\n  return (\n    <div className={classes.root}>\n      <CssBaseline />\n      <Container maxWidth=\"sm\">\n        {problems.map(({ holds, name, grade, author }) => (\n          <div key={name} className={classes.card}>\n            <Board holds={holds} />\n            <div className={classes.overlay}>\n              <div className={classes.description}>\n                <Typography variant=\"h5\">{`${name} ${grade}`}</Typography>\n                <Typography variant=\"body1\">{`by: ${author}`}</Typography>\n              </div>\n            </div>\n          </div>\n        ))}\n      </Container>\n    </div>\n  );\n};\n\nexport default ProblemList;\n","import React from 'react';\n\nimport Board from './Board';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { Button } from '@material-ui/core';\n\nimport Container from '@material-ui/core/Container';\nimport CssBaseline from '@material-ui/core/CssBaseline';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n    flexWrap: 'wrap',\n    justifyContent: 'space-around',\n    overflow: 'hidden',\n    backgroundColor: theme.palette.background.paper,\n  },\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120,\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2),\n  },\n}));\n\nconst BoardEditor = ({ holds, handleClick, createHold, saveBoard }) => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n      <CssBaseline />\n      <Container maxWidth=\"sm\">\n        <div className=\"home-wall\">\n          <Board dotOnClick onClick={handleClick} holds={holds} />\n        </div>\n        <Button\n          className={classes.formControl}\n          variant=\"contained\"\n          color=\"secondary\"\n          onClick={createHold}\n        >\n          Create hold\n        </Button>\n\n        <Button\n          className={classes.formControl}\n          variant=\"contained\"\n          color=\"primary\"\n          onClick={saveBoard}\n        >\n          Save board\n        </Button>\n      </Container>\n    </div>\n  );\n};\n\nclass BoardEditorContainer extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      points: [],\n      holds: [],\n    };\n\n    this.handleClick = this.handleClick.bind(this);\n    this.createHold = this.createHold.bind(this);\n  }\n\n  handleClick({ x, y }) {\n    this.setState({\n      points: [...this.state.points, { x, y }],\n    });\n  }\n\n  createHold() {\n    const { points } = this.state;\n\n    if (points.length < 3) {\n      return;\n    }\n\n    this.setState({\n      holds: [...this.state.holds, points],\n      points: [],\n    });\n  }\n\n  render() {\n    const { updateHolds } = this.props;\n\n    return (\n      <BoardEditor\n        holds={this.state.holds}\n        handleClick={this.handleClick}\n        createHold={this.createHold}\n        saveBoard={() => updateHolds(this.state.holds)}\n      />\n    );\n  }\n}\n\nexport default BoardEditorContainer;\n","import React from 'react';\nimport { fetchHolds, fetchProblems, upsertHolds, createProblem } from '../api/HomeWallApi';\nimport ProblemEditor from './ProblemEditor';\nimport ProblemList from './ProblemList';\nimport BoardEditor from './BoardEditor';\n\nimport CreateIcon from '@material-ui/icons/Create';\nimport AppBar from '@material-ui/core/AppBar';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Divider from '@material-ui/core/Divider';\nimport Drawer from '@material-ui/core/Drawer';\nimport Hidden from '@material-ui/core/Hidden';\nimport IconButton from '@material-ui/core/IconButton';\nimport ListIcon from '@material-ui/icons/List';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\n\nconst drawerWidth = 240;\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n  },\n  drawer: {\n    [theme.breakpoints.up('sm')]: {\n      width: drawerWidth,\n      flexShrink: 0,\n    },\n  },\n  appBar: {\n    [theme.breakpoints.up('sm')]: {\n      width: `calc(100% - ${drawerWidth}px)`,\n      marginLeft: drawerWidth,\n    },\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n    [theme.breakpoints.up('sm')]: {\n      display: 'none',\n    },\n  },\n  toolbar: theme.mixins.toolbar,\n  drawerPaper: {\n    width: drawerWidth,\n  },\n  content: {\n    flexGrow: 1,\n    padding: theme.spacing(3),\n  },\n}));\n\nconst SideBar = ({ page, setPage }) => {\n  const classes = useStyles();\n\n  return (\n    <div>\n      <div className={classes.toolbar} />\n      <Divider />\n      <List>\n        <ListItem button onClick={() => setPage('create')} selected={page === 'create'}>\n          <ListItemIcon>\n            <CreateIcon />\n          </ListItemIcon>\n          <ListItemText primary={'Create problem'} />\n        </ListItem>\n        <ListItem button onClick={() => setPage('list')} selected={page === 'list'}>\n          <ListItemIcon>\n            <ListIcon />\n          </ListItemIcon>\n          <ListItemText primary={'Existing problems'} />\n        </ListItem>\n      </List>\n    </div>\n  );\n};\n\nconst TopBar = ({ fullWidth = false, handleDrawerToggle }) => {\n  const classes = useStyles();\n\n  return (\n    <div>\n      <AppBar position=\"fixed\" className={fullWidth ? null : classes.appBar}>\n        <Toolbar>\n          <IconButton\n            color=\"inherit\"\n            aria-label=\"open drawer\"\n            edge=\"start\"\n            onClick={handleDrawerToggle}\n            className={classes.menuButton}\n          >\n            <MenuIcon />\n          </IconButton>\n          <Typography variant=\"h6\" noWrap>\n            Home Wall\n          </Typography>\n        </Toolbar>\n      </AppBar>\n    </div>\n  );\n};\n\nconst HomeWall = ({ problems, holds, createProblem, loading, updateHolds }) => {\n  const classes = useStyles();\n  const theme = useTheme();\n\n  const [mobileOpen, setMobileOpen] = React.useState(false);\n  const [page, setPage] = React.useState('list');\n\n  const handleDrawerToggle = () => {\n    setMobileOpen(!mobileOpen);\n  };\n\n  if (holds.length === 0) {\n    return (\n      <div className={classes.root}>\n        <CssBaseline />\n        <TopBar handleDrawerToggle={handleDrawerToggle} fullWidth />\n        <main className={classes.content}>\n          <div className={classes.toolbar} />\n          {!loading && <BoardEditor updateHolds={updateHolds} />}\n        </main>\n      </div>\n    );\n  }\n\n  return (\n    <div className={classes.root}>\n      <CssBaseline />\n      <TopBar handleDrawerToggle={handleDrawerToggle} />\n\n      <nav className={classes.drawer} aria-label=\"mailbox folders\">\n        <Hidden smUp implementation=\"css\">\n          <Drawer\n            variant=\"temporary\"\n            anchor={theme.direction === 'rtl' ? 'right' : 'left'}\n            open={mobileOpen}\n            onClose={handleDrawerToggle}\n            classes={{\n              paper: classes.drawerPaper,\n            }}\n            ModalProps={{\n              keepMounted: true,\n            }}\n          >\n            <SideBar\n              setPage={(updatedPage) => {\n                setPage(updatedPage);\n                setMobileOpen(false);\n              }}\n            />\n          </Drawer>\n        </Hidden>\n        <Hidden xsDown implementation=\"css\">\n          <Drawer\n            classes={{\n              paper: classes.drawerPaper,\n            }}\n            variant=\"permanent\"\n            open\n          >\n            <SideBar page={page} setPage={setPage} />\n          </Drawer>\n        </Hidden>\n      </nav>\n      <main className={classes.content}>\n        <div className={classes.toolbar} />\n        {page === 'list' && <ProblemList problems={problems} />}\n        {page === 'create' && <ProblemEditor allHolds={holds} createProblem={createProblem} />}\n      </main>\n    </div>\n  );\n};\n\nclass HomeWallContainer extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      loading: true,\n      holds: [],\n      problems: [],\n    };\n\n    this.updateHolds = this.updateHolds.bind(this);\n    this.createProblem = this.createProblem.bind(this);\n  }\n\n  componentDidMount() {\n    fetchProblems().then((problems) => {\n      fetchHolds().then((holds) =>\n        this.setState({\n          problems,\n          holds: holds,\n          loading: false,\n        }),\n      );\n    });\n  }\n\n  createProblem(problem) {\n    createProblem(problem).then((createdProblem) =>\n      this.setState({\n        problems: [createdProblem, ...this.state.problems],\n      }),\n    );\n  }\n\n  updateHolds(holds) {\n    upsertHolds(holds).then((holds) =>\n      this.setState({\n        holds,\n      }),\n    );\n  }\n\n  render() {\n    return (\n      <HomeWall\n        problems={this.state.problems}\n        holds={this.state.holds}\n        createProblem={this.createProblem}\n        updateHolds={this.updateHolds}\n        loading={this.state.loading}\n      />\n    );\n  }\n}\n\nexport default HomeWallContainer;\n","import '../css/App.css';\n\nimport HomeWall from './components/HomeWall';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <HomeWall />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './css/index.css';\nimport App from './js/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}