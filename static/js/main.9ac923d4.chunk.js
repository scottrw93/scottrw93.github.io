(this["webpackJsonphome-wall"]=this["webpackJsonphome-wall"]||[]).push([[0],{106:function(e,t,n){"use strict";n.r(t);var r=n(4),a=n(0),o=n.n(a),c=n(10),i=n.n(c),l=(n(96),n(97),n(57)),s=n(31),d=n(32),u=n(19),h=n(35),b=n(34),j="https://europe-west3-homewall-301021.cloudfunctions.net/HomeWall",f=n(40),m=n.p+"static/media/wall.ecca603c.jpg",p=function(e,t){return e.x===t.x&&e.y===t.y},x=function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!p(e[n],t[n]))return!1;return!0},v=window.matchMedia&&window.matchMedia("screen and (max-width: 900px)").matches?2*window.devicePixelRatio:window.devicePixelRatio,O=window.matchMedia?window.matchMedia("screen and (max-width: 600px)").matches?2.1:window.matchMedia("screen and (max-width: 900px)").matches?1.5:1:1,g=function(e){return e/O*v},y=function(e,t){e.forEach((function(e){t.beginPath();var n=e[0],r=n.x,a=n.y;t.moveTo(g(r),g(a)),e.forEach((function(e){var n=e.x,r=e.y;return t.lineTo(g(n),g(r))})),t.lineTo(g(r),g(a)),t.stroke(),t.closePath()}))},w=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).canvasRef=o.a.createRef(),r.state={img:new Image},r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this.state.img,t=this.props.holds,n=this.canvasRef.current,r=n.getContext("2d");e.src=m,this.setState({img:e}),e.onload=function(){var a=Math.floor(e.height/(e.width/600)/O),o=Math.floor(600/O);n.width=o*v,n.height=a*v,n.style.width="".concat(o,"px"),n.style.height="".concat(a,"px"),r.drawImage(e,0,0,n.width,n.height),r.lineWidth=1*v,r.strokeStyle="#FFFFFF",y(t,r)}}},{key:"componentDidUpdate",value:function(e){var t=this.props.holds,n=e.holds,r=this.state.img;if(n!==t){var a=this.canvasRef.current,o=a.getContext("2d");!function(e,t){if(t.length>e.length)return!1;for(var n=0;n<t.length;n++)if(!x(e[n],t[n]))return!1;return!0}(t,n)?(o.clearRect(0,0,a.width,a.height),o.drawImage(r,0,0,a.width,a.height),y(t,o)):y(t.slice(n.length),o)}}},{key:"render",value:function(){var e=this,t=this.props.onClick;return Object(r.jsx)("canvas",{ref:this.canvasRef,onMouseDown:function(n){var r=n.clientX,a=n.clientY;if(t){var o=e.canvasRef.current.getBoundingClientRect(),c=r-o.left,i=a-o.top;t({x:c*O,y:i*O})}}})}}]),n}(o.a.PureComponent),k=n(138),P=n(140),C=n(142),N=n(73),H=n.n(N),S=n(155),B={0:"5",1:"5+",2:"6A",3:"6A+",4:"6B",5:"6B+",6:"6C",7:"6C+",8:"7A",9:"7A+",10:"7B"},M=function(e){return B[e]||e},R=Object(k.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",backgroundColor:e.palette.background.paper},card:{position:"relative",marginBottom:"50px",display:"inline-block",backgroundColor:"black"},overlay:{position:"absolute",bottom:"0",left:"0",width:"100%",color:"white",backgroundColor:"black",opacity:.6},description:{padding:"10px 20px 10px 20px"},icons:{color:"white"}}})),W=function(e){var t=e.problems,n=e.deleteProblem,a=R();return 0===t.length?Object(r.jsx)("div",{className:a.root,children:"No problems created yet"}):Object(r.jsx)("div",{className:a.root,children:t.map((function(e){var t=e.uuid,o=e.holds,c=e.name,i=e.grade,l=e.author;return Object(r.jsxs)("div",{className:a.card,children:[Object(r.jsx)(w,{holds:o}),Object(r.jsx)("div",{className:a.overlay,children:Object(r.jsx)("div",{className:a.description,children:Object(r.jsxs)(S.a,{display:"flex",p:1,children:[Object(r.jsxs)(S.a,{p:1,flexGrow:1,children:[Object(r.jsx)(P.a,{variant:"h5",children:"".concat(c," ").concat(M(i))}),Object(r.jsx)(P.a,{variant:"body1",children:"by: ".concat(l)})]}),Object(r.jsx)(S.a,{p:1,children:Object(r.jsx)(C.a,{"aria-label":"delete",className:a.icons,onClick:function(){return n(t)},children:Object(r.jsx)(H.a,{})})})]})})})]},c)}))})},E=n(151),T=n(64),F=n(146),G=n(157),A=n(145),D=n(159),I=n(154),J=n(160),z=Object(k.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",backgroundColor:e.palette.background.paper},formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}})),L=function(e){var t=e.selectedHolds,n=e.clickHold,a=e.saveProblem,c=e.cancel,i=z(),l=o.a.useState(5),s=Object(f.a)(l,2),d=s[0],u=s[1],h=o.a.useState(null),b=Object(f.a)(h,2),j=b[0],m=b[1],p=o.a.useState("Scott Williams"),x=Object(f.a)(p,2),v=x[0],O=x[1],g=t.length<3||!j||!v||!d;return Object(r.jsxs)("div",{className:i.root,children:[Object(r.jsx)(w,{onClick:n,holds:t}),Object(r.jsxs)("div",{children:[Object(r.jsx)(G.a,{className:i.formControl,label:"Problem Name",variant:"outlined",onChange:function(e){var t=e.target.value;return m(t)}}),Object(r.jsx)(G.a,{className:i.formControl,label:"Author",defaultValue:v,variant:"outlined",onChange:function(e){var t=e.target.value;return O(t)}}),Object(r.jsxs)(A.a,{variant:"outlined",className:i.formControl,children:[Object(r.jsx)(D.a,{children:"Grade"}),Object(r.jsx)(I.a,{value:d,onChange:function(e){var t=e.target.value;return u(t)},label:"Grade",children:Object.keys(B).map((function(e){return Object(r.jsx)(J.a,{value:e,children:M(e)})}))})]})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)(F.a,{className:i.formControl,variant:"contained",color:"primary",onClick:function(){return a({name:j,grade:d,author:v,holds:t})},disabled:g,children:"Save problem"}),Object(r.jsx)(F.a,{className:i.formControl,variant:"contained",color:"secondary",onClick:c,children:"Cancel"})]})]})},U=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).state={selectedHolds:[]},r.clickHold=r.clickHold.bind(Object(u.a)(r)),r.saveProblem=r.saveProblem.bind(Object(u.a)(r)),r}return Object(d.a)(n,[{key:"clickHold",value:function(e){var t=this,n=e.x,r=e.y,a=this.props.holds,o=this.state.selectedHolds;a.forEach((function(e){(function(e,t){for(var n=e.x,r=e.y,a=!1,o=0,c=t.length-1;o<t.length;c=o++){var i=t[o].x,l=t[o].y,s=t[c].x,d=t[c].y;l>r!==d>r&&n<(s-i)*(r-l)/(d-l)+i&&(a=!a)}return a})({x:n,y:r},e)&&t.setState({selectedHolds:-1===o.indexOf(e)?[].concat(Object(l.a)(o),[e]):o.filter((function(t){return!x(t,e)}))})}))}},{key:"saveProblem",value:function(e){(0,this.props.createProblem)(e),this.setState({selectedHolds:[]})}},{key:"render",value:function(){var e=this.state.selectedHolds;return Object(r.jsx)(L,Object(T.a)(Object(T.a)({},this.props),{},{selectedHolds:e,clickHold:this.clickHold,saveProblem:this.saveProblem}))}}]),n}(o.a.PureComponent),V=n(150),X=n(152),Y=n(147),q=n(74),K=n.n(q),Q=Object(k.a)((function(e){return{appBar:{top:"auto",bottom:0,left:"auto",right:0,position:"fixed",width:"100%",display:"flex",zIndex:1100,boxSizing:"border-box",flexShrink:0,flexDirection:"column"},grow:{flexGrow:1},fabButton:{zIndex:1,top:-15,left:0,right:0,margin:"0 auto"}}})),Z=function(e){var t=e.onCreate,n=Q();return Object(r.jsx)("div",{color:"primary",className:n.appBar,children:Object(r.jsx)(Y.a,{color:"secondary","aria-label":"add",className:n.fabButton,onClick:t,children:Object(r.jsx)(K.a,{})})})},$=n(148),_=n(149),ee=n(75),te=n.n(ee),ne=Object(k.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},spacer:{width:"100%",height:"95px"}}})),re=function(){var e=ne();return Object(r.jsxs)("div",{className:e.root,children:[Object(r.jsx)($.a,{position:"fixed",children:Object(r.jsxs)(_.a,{children:[Object(r.jsx)(C.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu",children:Object(r.jsx)(te.a,{})}),Object(r.jsx)(P.a,{variant:"h6",className:e.title,children:"Home Wall"}),Object(r.jsx)(F.a,{color:"inherit",children:"Login"})]})}),Object(r.jsx)("div",{class:e.spacer})]})},ae=Object(k.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper},toolbar:e.mixins.toolbar,content:{flexGrow:1},loading:{display:"flex",justifyContent:"center",backgroundColor:e.palette.background.paper,marginTop:"50%",marginBottom:"50%"}}})),oe=function(){var e=ae();return Object(r.jsx)("div",{className:e.loading,children:Object(r.jsx)(V.a,{})})},ce=function(e){var t=e.holds,n=e.page,a=e.problems,c=e.createProblem,i=e.deleteProblem,l=e.setPage;return Object(r.jsxs)("div",{children:["list"===n&&Object(r.jsxs)(o.a.Fragment,{children:[Object(r.jsx)(W,{problems:a,deleteProblem:i}),Object(r.jsx)(Z,{showCreate:"list"===n,onCreate:function(){return l("create")}})]}),"create"===n&&Object(r.jsx)(U,{holds:t,createProblem:function(e){return c(e)&&l("list")},cancel:function(){return l("list")}})]})},ie=function(e){var t=e.problems,n=e.holds,a=e.createProblem,c=e.deleteProblem,i=e.loading,l=(e.updateHolds,ae()),s=o.a.useState("list"),d=Object(f.a)(s,2),u=d[0],h=d[1];return Object(r.jsxs)("div",{className:l.root,children:[Object(r.jsx)(E.a,{}),Object(r.jsxs)("main",{className:l.content,children:[Object(r.jsx)(re,{}),Object(r.jsx)(X.a,{maxWidth:"sm",children:i?Object(r.jsx)(oe,{}):Object(r.jsx)(ce,{holds:n,page:u,problems:t,createProblem:a,deleteProblem:c,setPage:h})})]})]})},le=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).state={loading:!0,holds:[],problems:[]},r.updateHolds=r.updateHolds.bind(Object(u.a)(r)),r.createProblem=r.createProblem.bind(Object(u.a)(r)),r.deleteProblem=r.deleteProblem.bind(Object(u.a)(r)),r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;return fetch("".concat(j,"/problems")).then((function(e){return e.json()})).then((function(e){return e}),(function(e){console.error({error:e})})).then((function(t){return fetch("".concat(j,"/holds")).then((function(e){return e.json()})).then((function(e){return e}),(function(e){console.error({error:e})})).then((function(n){return e.setState({problems:t,holds:n,loading:!1})}))}))}},{key:"createProblem",value:function(e){var t=this;return function(e){return fetch("".concat(j,"/problems"),{method:"POST",body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){return e}),(function(e){console.error({error:e})}))}(e).then((function(e){return t.setState({problems:[e].concat(Object(l.a)(t.state.problems))})}))}},{key:"deleteProblem",value:function(e){var t=this,n=this.state.problems;return function(e){return fetch("".concat(j,"/problems/").concat(e),{method:"DELETE"}).then((function(e){return e}),(function(e){console.error({error:e})}))}(e).then((function(){return t.setState({problems:n.filter((function(t){return t.uuid!==e}))})}))}},{key:"updateHolds",value:function(e){var t=this;return function(e){return fetch("".concat(j,"/holds"),{method:"PUT",body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){return e}),(function(e){console.error({error:e})}))}(e).then((function(e){return t.setState({holds:e})}))}},{key:"render",value:function(){return Object(r.jsx)(ie,{problems:this.state.problems,holds:this.state.holds,createProblem:this.createProblem,deleteProblem:this.deleteProblem,updateHolds:this.updateHolds,loading:this.state.loading})}}]),n}(o.a.PureComponent),se=n(78),de=n(153),ue=n(76),he=n.n(ue),be=n(77),je=n.n(be),fe=Object(se.a)({palette:{primary:he.a,secondary:je.a}});var me=function(){return Object(r.jsx)("div",{className:"App",children:Object(r.jsx)(de.a,{theme:fe,children:Object(r.jsx)(le,{})})})};i.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)(me,{})}),document.getElementById("root"))},96:function(e,t,n){},97:function(e,t,n){}},[[106,1,2]]]);
//# sourceMappingURL=main.9ac923d4.chunk.js.map