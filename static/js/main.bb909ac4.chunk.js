(this["webpackJsonphome-wall"]=this["webpackJsonphome-wall"]||[]).push([[0],{104:function(e,t,a){"use strict";a.r(t);var n=a(3),r=a(0),o=a.n(r),c=a(10),s=a.n(c),l=(a(94),a(95),a(38)),i=a(25),d=a(26),j=a(18),h=a(31),u=a(29),b=a(39),p=a(56),m="https://europe-west3-homewall-301021.cloudfunctions.net/HomeWall",x=a.p+"static/media/wall.ecca603c.jpg",O=window.matchMedia&&window.matchMedia("screen and (max-width: 600px)").matches?2.1:1,f=function(e){return e/O*window.devicePixelRatio},v=function(e,t){e.forEach((function(e){t.beginPath();var a=e[0],n=a.x,r=a.y;t.moveTo(f(n),f(r)),e.forEach((function(e){var a=e.x,n=e.y;return t.lineTo(f(a),f(n))})),t.lineTo(f(n),f(r)),t.stroke(),t.closePath()}))},g=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).canvasRef=o.a.createRef(),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.holds,t=this.canvasRef.current,a=t.getContext("2d"),n=new Image;n.src=x,n.onload=function(){var r=n.height/(n.width/600)/O,o=600/O;t.width=o*window.devicePixelRatio,t.height=r*window.devicePixelRatio,t.style.width="".concat(o,"px"),t.style.height="".concat(r,"px"),a.drawImage(n,0,0,t.width,t.height),a.lineWidth=2,a.strokeStyle="#FFFFFF",v(e,a)}}},{key:"componentDidUpdate",value:function(e){e.holds!==this.props.holds&&v(this.props.holds,this.canvasRef.current.getContext("2d"))}},{key:"render",value:function(){var e=this,t=this.props,a=t.onClick,r=t.dotOnClick,o=void 0!==r&&r;return Object(n.jsx)("canvas",{ref:this.canvasRef,onMouseDown:function(t){var n=t.clientX,r=t.clientY;if(a){var c=e.canvasRef.current,s=c.getContext("2d"),l=c.getBoundingClientRect(),i=n-l.left,d=r-l.top;o&&function(e,t,a){a.strokeRect(f(e),f(t),1,1)}(i,d,s),a({x:i*O,y:d*O})}}})}}]),a}(o.a.PureComponent),y=a(145),w=a(156),k=a(167),C=a(153),P=a(169),N=a(163),H=a(155),S=a(150),W=a(148),B=Object(y.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper},formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}})),R=function(e){var t=e.selectedHolds,a=e.wallKey,r=e.addHold,c=e.saveProblem,s=B(),l=o.a.useState("6B"),i=Object(b.a)(l,2),d=i[0],j=i[1],h=o.a.useState(null),u=Object(b.a)(h,2),p=u[0],m=u[1],x=o.a.useState("Scott Williams"),O=Object(b.a)(x,2),f=O[0],v=O[1],y=t.length<3||!p||!f||!d;return Object(n.jsxs)("div",{className:s.root,children:[Object(n.jsx)(W.a,{}),Object(n.jsxs)(S.a,{maxWidth:"sm",children:[Object(n.jsx)(g,{onClick:r,holds:t},a),Object(n.jsxs)("div",{children:[Object(n.jsx)(k.a,{className:s.formControl,label:"Problem Name",variant:"outlined",onChange:function(e){var t=e.target.value;return m(t)}}),Object(n.jsx)(k.a,{className:s.formControl,label:"Author",defaultValue:f,variant:"outlined",onChange:function(e){var t=e.target.value;return v(t)}}),Object(n.jsxs)(C.a,{variant:"outlined",className:s.formControl,children:[Object(n.jsx)(P.a,{children:"Grade"}),Object(n.jsxs)(N.a,{value:d,onChange:function(e){var t=e.target.value;return j(t)},label:"Grade",children:[Object(n.jsx)(H.a,{value:"None",children:"None"}),Object(n.jsx)(H.a,{value:"6B",children:"6B"}),Object(n.jsx)(H.a,{value:"7A",children:"7A"}),Object(n.jsx)(H.a,{value:"8A",children:"8A"})]})]})]}),Object(n.jsx)(w.a,{className:s.formControl,variant:"contained",color:"primary",onClick:function(){return c({name:p,grade:d,author:f,holds:t})},disabled:y,children:"Save problem"})]})]})},T=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={selectedHolds:[],wallKey:0},n.addHold=n.addHold.bind(Object(j.a)(n)),n.saveProblem=n.saveProblem.bind(Object(j.a)(n)),n}return Object(d.a)(a,[{key:"addHold",value:function(e){var t=this,a=e.x,n=e.y,r=this.props.allHolds,o=this.state.selectedHolds;r.forEach((function(e){(function(e,t){for(var a=e.x,n=e.y,r=!1,o=0,c=t.length-1;o<t.length;c=o++){var s=t[o].x,l=t[o].y,i=t[c].x,d=t[c].y;l>n!==d>n&&a<(i-s)*(n-l)/(d-l)+s&&(r=!r)}return r})({x:a,y:n},e)&&-1===o.indexOf(e)&&t.setState({selectedHolds:[].concat(Object(l.a)(o),[e])})}))}},{key:"saveProblem",value:function(e){(0,this.props.createProblem)(e),this.setState({selectedHolds:[],wallKey:this.state.wallKey+1})}},{key:"render",value:function(){var e=this.state,t=e.selectedHolds,a=e.wallKey;return Object(n.jsx)(R,{selectedHolds:t,wallKey:a,addHold:this.addHold,saveProblem:this.saveProblem})}}]),a}(o.a.PureComponent),D=a(57),M=Object(y.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper},card:{position:"relative",marginBottom:"50px",display:"inline-block",backgroundColor:"black"},overlay:{position:"absolute",bottom:"0",left:"0",width:"100%",color:"white",backgroundColor:"black",opacity:.6},description:{padding:"10px 10px 10px 10px"}}})),E=function(e){var t=e.problems,a=M();return 0===t.length?Object(n.jsxs)("div",{className:a.root,children:[Object(n.jsx)(W.a,{}),Object(n.jsx)(S.a,{maxWidth:"sm",children:Object(n.jsx)("div",{className:a.root,children:"No problems created yet"})})]}):Object(n.jsxs)("div",{className:a.root,children:[Object(n.jsx)(W.a,{}),Object(n.jsx)(S.a,{maxWidth:"sm",children:t.map((function(e){var t=e.holds,r=e.name,o=e.grade,c=e.author;return Object(n.jsxs)("div",{className:a.card,children:[Object(n.jsx)(g,{holds:t}),Object(n.jsx)("div",{className:a.overlay,children:Object(n.jsxs)("div",{className:a.description,children:[Object(n.jsx)(D.a,{variant:"h5",children:"".concat(r," ").concat(o)}),Object(n.jsx)(D.a,{variant:"body1",children:"by: ".concat(c)})]})})]},r)}))})]})},A=Object(y.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper},formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}})),F=function(e){var t=e.holds,a=e.handleClick,r=e.createHold,o=e.saveBoard,c=A();return Object(n.jsxs)("div",{className:c.root,children:[Object(n.jsx)(W.a,{}),Object(n.jsxs)(S.a,{maxWidth:"sm",children:[Object(n.jsx)("div",{className:"home-wall",children:Object(n.jsx)(g,{dotOnClick:!0,onClick:a,holds:t})}),Object(n.jsx)(w.a,{className:c.formControl,variant:"contained",color:"secondary",onClick:r,children:"Create hold"}),Object(n.jsx)(w.a,{className:c.formControl,variant:"contained",color:"primary",onClick:o,children:"Save board"})]})]})},K=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={points:[],holds:[]},n.handleClick=n.handleClick.bind(Object(j.a)(n)),n.createHold=n.createHold.bind(Object(j.a)(n)),n}return Object(d.a)(a,[{key:"handleClick",value:function(e){var t=e.x,a=e.y;this.setState({points:[].concat(Object(l.a)(this.state.points),[{x:t,y:a}])})}},{key:"createHold",value:function(){var e=this.state.points;e.length<3||this.setState({holds:[].concat(Object(l.a)(this.state.holds),[e]),points:[]})}},{key:"render",value:function(){var e=this,t=this.props.updateHolds;return Object(n.jsx)(F,{holds:this.state.holds,handleClick:this.handleClick,createHold:this.createHold,saveBoard:function(){return t(e.state.holds)}})}}]),a}(o.a.PureComponent),J=a(78),G=a.n(J),I=a(160),U=a(157),L=a(166),V=a(165),X=a(162),Y=a(79),q=a.n(Y),z=a(154),Q=a(107),Z=a(158),$=a(159),_=a(80),ee=a.n(_),te=a(161),ae=a(12),ne=240,re=Object(y.a)((function(e){return{root:{display:"flex"},drawer:Object(p.a)({},e.breakpoints.up("sm"),{width:ne,flexShrink:0}),appBar:Object(p.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(ne,"px)"),marginLeft:ne}),menuButton:Object(p.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:ne},content:{flexGrow:1,padding:e.spacing(3)}}})),oe=function(e){var t=e.page,a=e.setPage,r=re();return Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:r.toolbar}),Object(n.jsx)(U.a,{}),Object(n.jsxs)(z.a,{children:[Object(n.jsxs)(Q.a,{button:!0,onClick:function(){return a("create")},selected:"create"===t,children:[Object(n.jsx)(Z.a,{children:Object(n.jsx)(G.a,{})}),Object(n.jsx)($.a,{primary:"Create problem"})]}),Object(n.jsxs)(Q.a,{button:!0,onClick:function(){return a("list")},selected:"list"===t,children:[Object(n.jsx)(Z.a,{children:Object(n.jsx)(q.a,{})}),Object(n.jsx)($.a,{primary:"Existing problems"})]})]})]})},ce=function(e){var t=e.fullWidth,a=void 0!==t&&t,r=e.handleDrawerToggle,o=re();return Object(n.jsx)("div",{children:Object(n.jsx)(I.a,{position:"fixed",className:a?null:o.appBar,children:Object(n.jsxs)(te.a,{children:[Object(n.jsx)(X.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:r,className:o.menuButton,children:Object(n.jsx)(ee.a,{})}),Object(n.jsx)(D.a,{variant:"h6",noWrap:!0,children:"Home Wall"})]})})})},se=function(e){var t=e.problems,a=e.holds,r=e.createProblem,c=e.loading,s=e.updateHolds,l=re(),i=Object(ae.a)(),d=o.a.useState(!1),j=Object(b.a)(d,2),h=j[0],u=j[1],p=o.a.useState("list"),m=Object(b.a)(p,2),x=m[0],O=m[1],f=function(){u(!h)};return 0===a.length?Object(n.jsxs)("div",{className:l.root,children:[Object(n.jsx)(W.a,{}),Object(n.jsx)(ce,{handleDrawerToggle:f,fullWidth:!0}),Object(n.jsxs)("main",{className:l.content,children:[Object(n.jsx)("div",{className:l.toolbar}),!c&&Object(n.jsx)(K,{updateHolds:s})]})]}):Object(n.jsxs)("div",{className:l.root,children:[Object(n.jsx)(W.a,{}),Object(n.jsx)(ce,{handleDrawerToggle:f}),Object(n.jsxs)("nav",{className:l.drawer,"aria-label":"mailbox folders",children:[Object(n.jsx)(V.a,{smUp:!0,implementation:"css",children:Object(n.jsx)(L.a,{variant:"temporary",anchor:"rtl"===i.direction?"right":"left",open:h,onClose:f,classes:{paper:l.drawerPaper},ModalProps:{keepMounted:!0},children:Object(n.jsx)(oe,{setPage:function(e){O(e),u(!1)}})})}),Object(n.jsx)(V.a,{xsDown:!0,implementation:"css",children:Object(n.jsx)(L.a,{classes:{paper:l.drawerPaper},variant:"permanent",open:!0,children:Object(n.jsx)(oe,{page:x,setPage:O})})})]}),Object(n.jsxs)("main",{className:l.content,children:[Object(n.jsx)("div",{className:l.toolbar}),"list"===x&&Object(n.jsx)(E,{problems:t}),"create"===x&&Object(n.jsx)(T,{allHolds:a,createProblem:r})]})]})},le=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={loading:!0,holds:[],problems:[]},n.updateHolds=n.updateHolds.bind(Object(j.a)(n)),n.createProblem=n.createProblem.bind(Object(j.a)(n)),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(m,"/problems")).then((function(e){return e.json()})).then((function(e){return e}),(function(e){console.error({error:e})})).then((function(t){fetch("".concat(m,"/holds")).then((function(e){return e.json()})).then((function(e){return e}),(function(e){console.error({error:e})})).then((function(a){return e.setState({problems:t,holds:a,loading:!1})}))}))}},{key:"createProblem",value:function(e){var t=this;(function(e){return fetch("".concat(m,"/problems"),{method:"POST",body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){return e}),(function(e){console.error({error:e})}))})(e).then((function(e){return t.setState({problems:[e].concat(Object(l.a)(t.state.problems))})}))}},{key:"updateHolds",value:function(e){var t=this;(function(e){return fetch("".concat(m,"/holds"),{method:"PUT",body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){return e}),(function(e){console.error({error:e})}))})(e).then((function(e){return t.setState({holds:e})}))}},{key:"render",value:function(){return Object(n.jsx)(se,{problems:this.state.problems,holds:this.state.holds,createProblem:this.createProblem,updateHolds:this.updateHolds,loading:this.state.loading})}}]),a}(o.a.PureComponent);var ie=function(){return Object(n.jsx)("div",{className:"App",children:Object(n.jsx)(le,{})})};s.a.render(Object(n.jsx)(o.a.StrictMode,{children:Object(n.jsx)(ie,{})}),document.getElementById("root"))},94:function(e,t,a){},95:function(e,t,a){}},[[104,1,2]]]);
//# sourceMappingURL=main.bb909ac4.chunk.js.map