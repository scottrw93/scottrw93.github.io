{"version":3,"sources":["js/api/HomeWallApi.js","media/wall.jpg","js/components/Board.js","js/components/ProblemEditor.js","js/utils/RayCasting.js","js/components/ProblemList.js","js/components/BoardEditor.js","js/components/HomeWall.js","js/App.js","index.js"],"names":["HOMEWALL_API","SCREEN_FACTOR","window","matchMedia","matches","pointAt","corrodinate","factor","devicePixelRatio","draw","holds","context","forEach","points","beginPath","x0","x","y0","y","moveTo","lineTo","stroke","closePath","Board","props","canvasRef","React","createRef","this","current","getContext","wallImg","Image","src","wall","onload","height","width","style","drawImage","lineWidth","strokeStyle","prevProps","onClick","className","ref","onMouseDown","clientX","clientY","canvas","getBoundingClientRect","left","top","console","log","click","PureComponent","useStyles","makeStyles","theme","root","display","flexWrap","justifyContent","overflow","backgroundColor","palette","background","paper","formControl","margin","spacing","minWidth","selectEmpty","marginTop","ProblemEditor","selectedHolds","wallKey","addHold","saveProblem","classes","useState","grade","setGrade","name","setName","author","setAuthor","disabled","length","CssBaseline","Container","maxWidth","TextField","label","variant","onChange","value","target","defaultValue","FormControl","InputLabel","Select","MenuItem","Button","color","ProblemEditorContainer","state","bind","allHolds","hold","point","vs","inside","i","j","xi","yi","xj","yj","indexOf","setState","problem","createProblem","card","position","marginBottom","overlay","bottom","opacity","description","padding","ProblemList","problems","map","Typography","BoardEditor","handleClick","createHold","saveBoard","BoardEditorContainer","updateHolds","drawerWidth","drawer","breakpoints","up","flexShrink","appBar","marginLeft","menuButton","marginRight","toolbar","mixins","drawerPaper","content","flexGrow","SideBar","page","setPage","Divider","ListItem","button","selected","ListItemIcon","ListItemText","primary","TopBar","fullWidth","handleDrawerToggle","AppBar","Toolbar","IconButton","aria-label","edge","noWrap","HomeWall","loading","useTheme","mobileOpen","setMobileOpen","Hidden","smUp","implementation","Drawer","anchor","direction","open","onClose","ModalProps","keepMounted","updatedPage","xsDown","HomeWallContainer","fetch","then","res","json","result","error","method","body","JSON","stringify","createdProblem","upsertHolds","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"+OAAMA,EAAe,mECAN,MAA0B,iCCKnCC,EAAgBC,OAAOC,YACzBD,OAAOC,WAAW,iCAAiCC,QACjD,EAEF,EAEEC,EAAU,SAACC,EAAaC,GAAd,OAA0BD,EAAcC,EAAUL,OAAOM,kBAEnEC,EAAO,SAACC,EAAOC,EAASJ,GAC5BG,EAAME,SAAQ,SAACC,GACbF,EAAQG,YADgB,MAGCD,EAAO,GAArBE,EAHa,EAGhBC,EAAUC,EAHM,EAGTC,EAEfP,EAAQQ,OAAOd,EAAQU,EAAIR,GAASF,EAAQY,EAAIV,IAEhDM,EAAOD,SAAQ,gBAAGI,EAAH,EAAGA,EAAGE,EAAN,EAAMA,EAAN,OAAcP,EAAQS,OAAOf,EAAQW,EAAGT,GAASF,EAAQa,EAAGX,OAC3EI,EAAQS,OAAOf,EAAQU,EAAIR,GAASF,EAAQY,EAAIV,IAEhDI,EAAQU,SACRV,EAAQW,gBAmEGC,E,kDA9Db,WAAYC,GAAQ,IAAD,8BACjB,cAAMA,IAEDC,UAAYC,IAAMC,YAHN,E,gEAME,IAAD,OACVjB,EAAUkB,KAAKJ,MAAfd,MACFC,EAAUiB,KAAKH,UAAUI,QAAQC,WAAW,MAC5CC,EAAU,IAAIC,MAEpBD,EAAQE,IAAMC,EAEdH,EAAQI,OAAS,WACf,IAAMC,EAASL,EAAQK,QAAUL,EAAQM,MAxCjC,KAwCkDpC,EACpDoC,EAzCE,IAyCcpC,EAEtB,EAAKwB,UAAUI,QAAQQ,MAAQA,EAAQnC,OAAOM,iBAC9C,EAAKiB,UAAUI,QAAQO,OAASA,EAASlC,OAAOM,iBAEhD,EAAKiB,UAAUI,QAAQS,MAAMD,MAA7B,UAAwCA,EAAxC,MACA,EAAKZ,UAAUI,QAAQS,MAAMF,OAA7B,UAAyCA,EAAzC,MAEAzB,EAAQ4B,UAAUR,EAAS,EAAG,EAAG,EAAKN,UAAUI,QAAQQ,MAAO,EAAKZ,UAAUI,QAAQO,QACtFzB,EAAQ6B,UAAY,EACpB7B,EAAQ8B,YAAc,UAEtBhC,EAAKC,EAAOC,EAASV,M,yCAINyC,GACbA,EAAUhC,QAAUkB,KAAKJ,MAAMd,OACjCD,EAAKmB,KAAKJ,MAAMd,MAAOkB,KAAKH,UAAUI,QAAQC,WAAW,MAAO7B,K,+BAI1D,IAAD,OACC0C,EAAYf,KAAKJ,MAAjBmB,QAER,OACE,wBACEC,UAAU,mBACVP,MArEM,IAqESpC,EACf4C,IAAKjB,KAAKH,UACVqB,YAAa,YAA2B,IAAxBC,EAAuB,EAAvBA,QAASC,EAAc,EAAdA,QACvB,GAAIL,EAAS,CACX,IAAMM,EAAS,EAAKxB,UAAUI,QAAQqB,wBAEhClC,EAAI+B,EAAUE,EAAOE,KACrBjC,EAAI8B,EAAUC,EAAOG,IAE3BC,QAAQC,IAAI,CAAEC,MAAO,CAAEvC,IAAGE,OAE1ByB,EAAQ,CAAE3B,EAAGA,EAAIf,EAAeiB,EAAGA,EAAIjB,Y,GAvD/ByB,IAAM8B,e,iFChBpBC,EAAYC,aAAW,SAACC,GAAD,MAAY,CACvCC,KAAM,CACJC,QAAS,OACTC,SAAU,OACVC,eAAgB,eAChBC,SAAU,SACVC,gBAAiBN,EAAMO,QAAQC,WAAWC,OAE5CC,YAAa,CACXC,OAAQX,EAAMY,QAAQ,GACtBC,SAAU,KAEZC,YAAa,CACXC,UAAWf,EAAMY,QAAQ,QAIvBI,EAAgB,SAAC,GAAsD,IAApDC,EAAmD,EAAnDA,cAAeC,EAAoC,EAApCA,QAASC,EAA2B,EAA3BA,QAASC,EAAkB,EAAlBA,YAClDC,EAAUvB,IAD0D,EAGhD/B,IAAMuD,SAAS,MAHiC,mBAGnEC,EAHmE,KAG5DC,EAH4D,OAIlDzD,IAAMuD,SAAS,MAJmC,mBAInEG,EAJmE,KAI7DC,EAJ6D,OAK9C3D,IAAMuD,SAAS,kBAL+B,mBAKnEK,EALmE,KAK3DC,EAL2D,KAMpEC,EAAWZ,EAAca,OAAS,IAAML,IAASE,IAAWJ,EAElE,OACE,sBAAKtC,UAAWoC,EAAQpB,KAAxB,UACE,cAAC8B,EAAA,EAAD,IACA,eAACC,EAAA,EAAD,CAAWC,SAAS,KAApB,UACE,cAAC,EAAD,CAAqBjD,QAASmC,EAASpE,MAAOkE,GAAlCC,GACZ,gCACE,cAACgB,EAAA,EAAD,CACEjD,UAAWoC,EAAQX,YACnByB,MAAM,eACNC,QAAQ,WACRC,SAAU,gBAAaC,EAAb,EAAGC,OAAUD,MAAb,OAA2BZ,EAAQY,MAE/C,cAACJ,EAAA,EAAD,CACEjD,UAAWoC,EAAQX,YACnByB,MAAM,SACNK,aAAcb,EACdS,QAAQ,WACRC,SAAU,gBAAaC,EAAb,EAAGC,OAAUD,MAAb,OAA2BV,EAAUU,MAGjD,eAACG,EAAA,EAAD,CAAaL,QAAQ,WAAWnD,UAAWoC,EAAQX,YAAnD,UACE,cAACgC,EAAA,EAAD,oBACA,eAACC,EAAA,EAAD,CACEL,MAAOf,EACPc,SAAU,gBAAaC,EAAb,EAAGC,OAAUD,MAAb,OAA2Bd,EAASc,IAC9CH,MAAM,QAHR,UAKE,cAACS,EAAA,EAAD,CAAUN,MAAM,OAAhB,kBACA,cAACM,EAAA,EAAD,CAAUN,MAAM,KAAhB,gBACA,cAACM,EAAA,EAAD,CAAUN,MAAM,KAAhB,gBACA,cAACM,EAAA,EAAD,CAAUN,MAAM,KAAhB,yBAIN,cAACO,EAAA,EAAD,CACE5D,UAAWoC,EAAQX,YACnB0B,QAAQ,YACRU,MAAM,UACN9D,QAAS,kBACPoC,EAAY,CACVK,OACAF,QACAI,SACA5E,MAAOkE,KAGXY,SAAUA,EAZZ,iCA0EOkB,E,kDApDb,WAAYlF,GAAQ,IAAD,8BACjB,cAAMA,IAEDmF,MAAQ,CACX/B,cAAe,GACfC,QAAS,GAGX,EAAKC,QAAU,EAAKA,QAAQ8B,KAAb,gBACf,EAAK7B,YAAc,EAAKA,YAAY6B,KAAjB,gBATF,E,uDAYA,IAAD,OAAR5F,EAAQ,EAARA,EAAGE,EAAK,EAALA,EACH2F,EAAajF,KAAKJ,MAAlBqF,SACAjC,EAAkBhD,KAAK+E,MAAvB/B,cAERiC,EAASjG,SAAQ,SAACkG,IC9GA,SAACC,EAAOC,GAK5B,IAJA,IAAMhG,EAAI+F,EAAM/F,EACdE,EAAI6F,EAAM7F,EAER+F,GAAS,EACJC,EAAI,EAAGC,EAAIH,EAAGvB,OAAS,EAAGyB,EAAIF,EAAGvB,OAAQ0B,EAAID,IAAK,CACzD,IAAME,EAAKJ,EAAGE,GAAGlG,EACfqG,EAAKL,EAAGE,GAAGhG,EACPoG,EAAKN,EAAGG,GAAGnG,EACfuG,EAAKP,EAAGG,GAAGjG,EAGKmG,EAAKnG,IAAMqG,EAAKrG,GAAKF,GAAMsG,EAAKF,IAAOlG,EAAImG,IAAQE,EAAKF,GAAMD,IACjEH,GAAUA,GAG3B,OAAOA,GD+FCA,CAAO,CAAEjG,IAAGE,KAAK4F,KACkB,IAAjClC,EAAc4C,QAAQV,IACxB,EAAKW,SAAS,CACZ7C,cAAc,GAAD,mBAAMA,GAAN,CAAqBkC,W,kCAOhCY,IAGVC,EAF0B/F,KAAKJ,MAAvBmG,eAEMD,GAEd9F,KAAK6F,SAAS,CACZ7C,cAAe,GACfC,QAASjD,KAAK+E,MAAM9B,QAAU,M,+BAIxB,IAAD,EAC4BjD,KAAK+E,MAAhC/B,EADD,EACCA,cAAeC,EADhB,EACgBA,QAEvB,OACE,cAAC,EAAD,CACED,cAAeA,EACfC,QAASA,EACTC,QAASlD,KAAKkD,QACdC,YAAanD,KAAKmD,kB,GA/CWrD,IAAM8B,e,QEpFrCC,EAAYC,aAAW,SAACC,GAAD,MAAY,CACvCC,KAAM,CACJC,QAAS,OACTC,SAAU,OACVC,eAAgB,eAChBC,SAAU,SACVC,gBAAiBN,EAAMO,QAAQC,WAAWC,OAE5CwD,KAAM,CACJC,SAAU,WACVC,aAAc,OACdjE,QAAS,eACTI,gBAAiB,SAEnB8D,QAAS,CACPF,SAAU,WACVG,OAAQ,IACR7E,KAAM,IACNd,MAAO,OACPoE,MAAO,QACPxC,gBAAiB,QACjBgE,QAAS,IAEXC,YAAa,CACXC,QAAS,2BAsCEC,EAlCK,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SACfrD,EAAUvB,IAEhB,OAAwB,IAApB4E,EAAS5C,OAET,sBAAK7C,UAAWoC,EAAQpB,KAAxB,UACE,cAAC8B,EAAA,EAAD,IACA,cAACC,EAAA,EAAD,CAAWC,SAAS,KAApB,SACE,qBAAKhD,UAAWoC,EAAQpB,KAAxB,0CAON,sBAAKhB,UAAWoC,EAAQpB,KAAxB,UACE,cAAC8B,EAAA,EAAD,IACA,cAACC,EAAA,EAAD,CAAWC,SAAS,KAApB,SACGyC,EAASC,KAAI,gBAAG5H,EAAH,EAAGA,MAAO0E,EAAV,EAAUA,KAAMF,EAAhB,EAAgBA,MAAOI,EAAvB,EAAuBA,OAAvB,OACZ,sBAAgB1C,UAAWoC,EAAQ4C,KAAnC,UACE,cAAC,EAAD,CAAOlH,MAAOA,IACd,qBAAKkC,UAAWoC,EAAQ+C,QAAxB,SACE,sBAAKnF,UAAWoC,EAAQkD,YAAxB,UACE,cAACK,EAAA,EAAD,CAAYxC,QAAQ,KAApB,mBAA6BX,EAA7B,YAAqCF,KACrC,cAACqD,EAAA,EAAD,CAAYxC,QAAQ,QAApB,uBAAoCT,YALhCF,YC7Cd3B,EAAYC,aAAW,SAACC,GAAD,MAAY,CACvCC,KAAM,CACJC,QAAS,OACTC,SAAU,OACVC,eAAgB,eAChBC,SAAU,SACVC,gBAAiBN,EAAMO,QAAQC,WAAWC,OAE5CC,YAAa,CACXC,OAAQX,EAAMY,QAAQ,GACtBC,SAAU,KAEZC,YAAa,CACXC,UAAWf,EAAMY,QAAQ,QAIvBiE,EAAc,SAAC,GAAmD,IAAjD9H,EAAgD,EAAhDA,MAAO+H,EAAyC,EAAzCA,YAAaC,EAA4B,EAA5BA,WAAYC,EAAgB,EAAhBA,UAC/C3D,EAAUvB,IAEhB,OACE,sBAAKb,UAAWoC,EAAQpB,KAAxB,UACE,cAAC8B,EAAA,EAAD,IACA,eAACC,EAAA,EAAD,CAAWC,SAAS,KAApB,UACE,qBAAKhD,UAAU,YAAf,SACE,cAAC,EAAD,CAAOD,QAAS8F,EAAa/H,MAAOA,MAEtC,cAAC8F,EAAA,EAAD,CACE5D,UAAWoC,EAAQX,YACnB0B,QAAQ,YACRU,MAAM,YACN9D,QAAS+F,EAJX,yBASA,cAAClC,EAAA,EAAD,CACE5D,UAAWoC,EAAQX,YACnB0B,QAAQ,YACRU,MAAM,UACN9D,QAASgG,EAJX,+BA2DOC,E,kDA7Cb,WAAYpH,GAAQ,IAAD,8BACjB,cAAMA,IAEDmF,MAAQ,CACX9F,OAAQ,GACRH,MAAO,IAGT,EAAK+H,YAAc,EAAKA,YAAY7B,KAAjB,gBACnB,EAAK8B,WAAa,EAAKA,WAAW9B,KAAhB,gBATD,E,2DAYI,IAAT5F,EAAQ,EAARA,EAAGE,EAAK,EAALA,EACfU,KAAK6F,SAAS,CACZ5G,OAAO,GAAD,mBAAMe,KAAK+E,MAAM9F,QAAjB,CAAyB,CAAEG,IAAGE,W,mCAI1B,IACJL,EAAWe,KAAK+E,MAAhB9F,OAEJA,EAAO4E,OAAS,GAIpB7D,KAAK6F,SAAS,CACZ/G,MAAM,GAAD,mBAAMkB,KAAK+E,MAAMjG,OAAjB,CAAwBG,IAC7BA,OAAQ,O,+BAIF,IAAD,OACCgI,EAAgBjH,KAAKJ,MAArBqH,YAER,OACE,cAAC,EAAD,CACEnI,MAAOkB,KAAK+E,MAAMjG,MAClB+H,YAAa7G,KAAK6G,YAClBC,WAAY9G,KAAK8G,WACjBC,UAAW,kBAAME,EAAY,EAAKlC,MAAMjG,c,GAxCbgB,IAAM8B,e,wJCrCnCsF,GAAc,IAEdrF,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCC,KAAM,CACJC,QAAS,QAEXkF,OAAO,eACJpF,EAAMqF,YAAYC,GAAG,MAAQ,CAC5B5G,MAAOyG,GACPI,WAAY,IAGhBC,OAAO,eACJxF,EAAMqF,YAAYC,GAAG,MAAQ,CAC5B5G,MAAM,eAAD,OAAiByG,GAAjB,OACLM,WAAYN,KAGhBO,WAAW,aACTC,YAAa3F,EAAMY,QAAQ,IAC1BZ,EAAMqF,YAAYC,GAAG,MAAQ,CAC5BpF,QAAS,SAGb0F,QAAS5F,EAAM6F,OAAOD,QACtBE,YAAa,CACXpH,MAAOyG,IAETY,QAAS,CACPC,SAAU,EACVxB,QAASxE,EAAMY,QAAQ,QAIrBqF,GAAU,SAAC,GAAuB,IAArBC,EAAoB,EAApBA,KAAMC,EAAc,EAAdA,QACjB9E,EAAUvB,KAEhB,OACE,gCACE,qBAAKb,UAAWoC,EAAQuE,UACxB,cAACQ,EAAA,EAAD,IACA,eAAC,IAAD,WACE,eAACC,EAAA,EAAD,CAAUC,QAAM,EAACtH,QAAS,kBAAMmH,EAAQ,WAAWI,SAAmB,WAATL,EAA7D,UACE,cAACM,EAAA,EAAD,UACE,cAAC,IAAD,MAEF,cAACC,EAAA,EAAD,CAAcC,QAAS,sBAEzB,eAACL,EAAA,EAAD,CAAUC,QAAM,EAACtH,QAAS,kBAAMmH,EAAQ,SAASI,SAAmB,SAATL,EAA3D,UACE,cAACM,EAAA,EAAD,UACE,cAAC,IAAD,MAEF,cAACC,EAAA,EAAD,CAAcC,QAAS,gCAO3BC,GAAS,SAAC,GAA+C,IAAD,IAA5CC,iBAA4C,SAAzBC,EAAyB,EAAzBA,mBAC7BxF,EAAUvB,KAEhB,OACE,8BACE,cAACgH,EAAA,EAAD,CAAQ5C,SAAS,QAAQjF,UAAW2H,EAAY,KAAOvF,EAAQmE,OAA/D,SACE,eAACuB,GAAA,EAAD,WACE,cAACC,EAAA,EAAD,CACElE,MAAM,UACNmE,aAAW,cACXC,KAAK,QACLlI,QAAS6H,EACT5H,UAAWoC,EAAQqE,WALrB,SAOE,cAAC,KAAD,MAEF,cAACd,EAAA,EAAD,CAAYxC,QAAQ,KAAK+E,QAAM,EAA/B,+BASJC,GAAW,SAAC,GAA8D,IAA5D1C,EAA2D,EAA3DA,SAAU3H,EAAiD,EAAjDA,MAAOiH,EAA0C,EAA1CA,cAAeqD,EAA2B,EAA3BA,QAASnC,EAAkB,EAAlBA,YACrD7D,EAAUvB,KACVE,EAAQsH,eAF+D,EAIzCvJ,IAAMuD,UAAS,GAJ0B,mBAItEiG,EAJsE,KAI1DC,EAJ0D,OAKrDzJ,IAAMuD,SAAS,QALsC,mBAKtE4E,EALsE,KAKhEC,EALgE,KAOvEU,EAAqB,WACzBW,GAAeD,IAGjB,OAAqB,IAAjBxK,EAAM+E,OAEN,sBAAK7C,UAAWoC,EAAQpB,KAAxB,UACE,cAAC8B,EAAA,EAAD,IACA,cAAC,GAAD,CAAQ8E,mBAAoBA,EAAoBD,WAAS,IACzD,uBAAM3H,UAAWoC,EAAQ0E,QAAzB,UACE,qBAAK9G,UAAWoC,EAAQuE,WACtByB,GAAW,cAAC,EAAD,CAAanC,YAAaA,UAO7C,sBAAKjG,UAAWoC,EAAQpB,KAAxB,UACE,cAAC8B,EAAA,EAAD,IACA,cAAC,GAAD,CAAQ8E,mBAAoBA,IAE5B,sBAAK5H,UAAWoC,EAAQ+D,OAAQ6B,aAAW,kBAA3C,UACE,cAACQ,EAAA,EAAD,CAAQC,MAAI,EAACC,eAAe,MAA5B,SACE,cAACC,EAAA,EAAD,CACExF,QAAQ,YACRyF,OAA4B,QAApB7H,EAAM8H,UAAsB,QAAU,OAC9CC,KAAMR,EACNS,QAASnB,EACTxF,QAAS,CACPZ,MAAOY,EAAQyE,aAEjBmC,WAAY,CACVC,aAAa,GATjB,SAYE,cAAC,GAAD,CACE/B,QAAS,SAACgC,GACRhC,EAAQgC,GACRX,GAAc,UAKtB,cAACC,EAAA,EAAD,CAAQW,QAAM,EAACT,eAAe,MAA9B,SACE,cAACC,EAAA,EAAD,CACEvG,QAAS,CACPZ,MAAOY,EAAQyE,aAEjB1D,QAAQ,YACR2F,MAAI,EALN,SAOE,cAAC,GAAD,CAAS7B,KAAMA,EAAMC,QAASA,WAIpC,uBAAMlH,UAAWoC,EAAQ0E,QAAzB,UACE,qBAAK9G,UAAWoC,EAAQuE,UACd,SAATM,GAAmB,cAAC,EAAD,CAAaxB,SAAUA,IACjC,WAATwB,GAAqB,cAAC,EAAD,CAAehD,SAAUnG,EAAOiH,cAAeA,WA6D9DqE,G,kDAtDb,WAAYxK,GAAQ,IAAD,8BACjB,cAAMA,IAEDmF,MAAQ,CACXqE,SAAS,EACTtK,MAAO,GACP2H,SAAU,IAGZ,EAAKQ,YAAc,EAAKA,YAAYjC,KAAjB,gBACnB,EAAKe,cAAgB,EAAKA,cAAcf,KAAnB,gBAVJ,E,gEAaE,IAAD,OP7LbqF,MAAM,GAAD,OAAIjM,EAAJ,cACTkM,MAAK,SAACC,GAAD,OAASA,EAAIC,UAClBF,MACC,SAACG,GACC,OAAOA,KAET,SAACC,GACCjJ,QAAQiJ,MAAM,CAAEA,aOuLJJ,MAAK,SAAC7D,GPjLjB4D,MAAM,GAAD,OAAIjM,EAAJ,WACTkM,MAAK,SAACC,GAAD,OAASA,EAAIC,UAClBF,MACC,SAACG,GACC,OAAOA,KAET,SAACC,GACCjJ,QAAQiJ,MAAM,CAAEA,aO2KLJ,MAAK,SAACxL,GAAD,OAChB,EAAK+G,SAAS,CACZY,WACA3H,MAAOA,EACPsK,SAAS,Y,oCAMHtD,GAAU,IAAD,QPhKI,SAACA,GAC5B,OAAOuE,MAAM,GAAD,OAAIjM,EAAJ,aAA6B,CACvCuM,OAAQ,OACRC,KAAMC,KAAKC,UAAUhF,KAEpBwE,MAAK,SAACC,GAAD,OAASA,EAAIC,UAClBF,MACC,SAACG,GACC,OAAOA,KAET,SAACC,GACCjJ,QAAQiJ,MAAM,CAAEA,cOsJpB3E,CAAcD,GAASwE,MAAK,SAACS,GAAD,OAC1B,EAAKlF,SAAS,CACZY,SAAS,CAAEsE,GAAH,mBAAsB,EAAKhG,MAAM0B,kB,kCAKnC3H,GAAQ,IAAD,QPxLM,SAACA,GAC1B,OAAOuL,MAAM,GAAD,OAAIjM,EAAJ,UAA0B,CACpCuM,OAAQ,MACRC,KAAMC,KAAKC,UAAUhM,KAEpBwL,MAAK,SAACC,GAAD,OAASA,EAAIC,UAClBF,MACC,SAACG,GACC,OAAOA,KAET,SAACC,GACCjJ,QAAQiJ,MAAM,CAAEA,cO8KpBM,CAAYlM,GAAOwL,MAAK,SAACxL,GAAD,OACtB,EAAK+G,SAAS,CACZ/G,e,+BAMJ,OACE,cAAC,GAAD,CACE2H,SAAUzG,KAAK+E,MAAM0B,SACrB3H,MAAOkB,KAAK+E,MAAMjG,MAClBiH,cAAe/F,KAAK+F,cACpBkB,YAAajH,KAAKiH,YAClBmC,QAASpJ,KAAK+E,MAAMqE,c,GAjDItJ,IAAM8B,eCvKvBqJ,OARf,WACE,OACE,qBAAKjK,UAAU,MAAf,SACE,cAAC,GAAD,OCFNkK,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,GAAD,MAEFC,SAASC,eAAe,U","file":"static/js/main.70e19c25.chunk.js","sourcesContent":["const HOMEWALL_API = 'https://europe-west3-homewall-301021.cloudfunctions.net/HomeWall';\n//const HOMEWALL_API = 'http://localhost:8080';\n\nexport const fetchProblems = () => {\n  return fetch(`${HOMEWALL_API}/problems`)\n    .then((res) => res.json())\n    .then(\n      (result) => {\n        return result;\n      },\n      (error) => {\n        console.error({ error });\n      },\n    );\n};\n\nexport const fetchHolds = () => {\n  return fetch(`${HOMEWALL_API}/holds`)\n    .then((res) => res.json())\n    .then(\n      (result) => {\n        return result;\n      },\n      (error) => {\n        console.error({ error });\n      },\n    );\n};\n\nexport const upsertHolds = (holds) => {\n  return fetch(`${HOMEWALL_API}/holds`, {\n    method: 'PUT',\n    body: JSON.stringify(holds),\n  })\n    .then((res) => res.json())\n    .then(\n      (result) => {\n        return result;\n      },\n      (error) => {\n        console.error({ error });\n      },\n    );\n};\n\nexport const createProblem = (problem) => {\n  return fetch(`${HOMEWALL_API}/problems`, {\n    method: 'POST',\n    body: JSON.stringify(problem),\n  })\n    .then((res) => res.json())\n    .then(\n      (result) => {\n        return result;\n      },\n      (error) => {\n        console.error({ error });\n      },\n    );\n};\n","export default __webpack_public_path__ + \"static/media/wall.ecca603c.jpg\";","import React from 'react';\n\nimport wall from '../../media/wall.jpg';\n\nconst WIDTH = 600;\nconst SCREEN_FACTOR = window.matchMedia\n  ? window.matchMedia('screen and (max-width: 600px)').matches\n    ? 2\n    : 1\n  : 1;\n\nconst pointAt = (corrodinate, factor) => (corrodinate / factor) * window.devicePixelRatio;\n\nconst draw = (holds, context, factor) => {\n  holds.forEach((points) => {\n    context.beginPath();\n\n    const { x: x0, y: y0 } = points[0];\n\n    context.moveTo(pointAt(x0, factor), pointAt(y0, factor));\n    \n    points.forEach(({ x, y }) => context.lineTo(pointAt(x, factor), pointAt(y, factor)));\n    context.lineTo(pointAt(x0, factor), pointAt(y0, factor));\n\n    context.stroke();\n    context.closePath();\n  });\n};\n\nclass Board extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.canvasRef = React.createRef();\n  }\n\n  componentDidMount() {\n    const { holds } = this.props;\n    const context = this.canvasRef.current.getContext('2d');\n    const wallImg = new Image();\n\n    wallImg.src = wall;\n\n    wallImg.onload = () => {\n      const height = wallImg.height / (wallImg.width / WIDTH) / SCREEN_FACTOR;\n      const width = WIDTH / SCREEN_FACTOR;\n\n      this.canvasRef.current.width = width * window.devicePixelRatio;\n      this.canvasRef.current.height = height * window.devicePixelRatio;\n\n      this.canvasRef.current.style.width = `${width}px`;\n      this.canvasRef.current.style.height = `${height}px`;\n\n      context.drawImage(wallImg, 0, 0, this.canvasRef.current.width, this.canvasRef.current.height);\n      context.lineWidth = 2;\n      context.strokeStyle = '#FFFFFF';\n\n      draw(holds, context, SCREEN_FACTOR);\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.holds !== this.props.holds) {\n      draw(this.props.holds, this.canvasRef.current.getContext('2d'), SCREEN_FACTOR);\n    }\n  }\n\n  render() {\n    const { onClick } = this.props;\n\n    return (\n      <canvas\n        className=\"home-wall-canvas\"\n        width={WIDTH / SCREEN_FACTOR}\n        ref={this.canvasRef}\n        onMouseDown={({ clientX, clientY }) => {\n          if (onClick) {\n            const canvas = this.canvasRef.current.getBoundingClientRect();\n\n            const x = clientX - canvas.left;\n            const y = clientY - canvas.top;\n\n            console.log({ click: { x, y } });\n\n            onClick({ x: x * SCREEN_FACTOR, y: y * SCREEN_FACTOR });\n          }\n        }}\n      />\n    );\n  }\n}\n\nexport default Board;\n","import React from 'react';\nimport Board from './Board';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { Button } from '@material-ui/core';\nimport { TextField } from '@material-ui/core';\nimport { MenuItem, FormControl, InputLabel, Select } from '@material-ui/core';\nimport { inside } from '../utils/RayCasting';\n\nimport Container from '@material-ui/core/Container';\nimport CssBaseline from '@material-ui/core/CssBaseline';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n    flexWrap: 'wrap',\n    justifyContent: 'space-around',\n    overflow: 'hidden',\n    backgroundColor: theme.palette.background.paper,\n  },\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120,\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2),\n  },\n}));\n\nconst ProblemEditor = ({ selectedHolds, wallKey, addHold, saveProblem }) => {\n  const classes = useStyles();\n\n  const [grade, setGrade] = React.useState('6B');\n  const [name, setName] = React.useState(null);\n  const [author, setAuthor] = React.useState('Scott Williams');\n  const disabled = selectedHolds.length < 3 || !name || !author || !grade;\n\n  return (\n    <div className={classes.root}>\n      <CssBaseline />\n      <Container maxWidth=\"sm\">\n        <Board key={wallKey} onClick={addHold} holds={selectedHolds} />\n        <div>\n          <TextField\n            className={classes.formControl}\n            label=\"Problem Name\"\n            variant=\"outlined\"\n            onChange={({ target: { value } }) => setName(value)}\n          />\n          <TextField\n            className={classes.formControl}\n            label=\"Author\"\n            defaultValue={author}\n            variant=\"outlined\"\n            onChange={({ target: { value } }) => setAuthor(value)}\n          />\n\n          <FormControl variant=\"outlined\" className={classes.formControl}>\n            <InputLabel>Grade</InputLabel>\n            <Select\n              value={grade}\n              onChange={({ target: { value } }) => setGrade(value)}\n              label=\"Grade\"\n            >\n              <MenuItem value=\"None\">None</MenuItem>\n              <MenuItem value=\"6B\">6B</MenuItem>\n              <MenuItem value=\"7A\">7A</MenuItem>\n              <MenuItem value=\"8A\">8A</MenuItem>\n            </Select>\n          </FormControl>\n        </div>\n        <Button\n          className={classes.formControl}\n          variant=\"contained\"\n          color=\"primary\"\n          onClick={() =>\n            saveProblem({\n              name,\n              grade,\n              author,\n              holds: selectedHolds,\n            })\n          }\n          disabled={disabled}\n        >\n          Save problem\n        </Button>\n      </Container>\n    </div>\n  );\n};\n\nclass ProblemEditorContainer extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      selectedHolds: [],\n      wallKey: 0,\n    };\n\n    this.addHold = this.addHold.bind(this);\n    this.saveProblem = this.saveProblem.bind(this);\n  }\n\n  addHold({ x, y }) {\n    const { allHolds } = this.props;\n    const { selectedHolds } = this.state;\n\n    allHolds.forEach((hold) => {\n      if (inside({ x, y }, hold)) {\n        if (selectedHolds.indexOf(hold) === -1) {\n          this.setState({\n            selectedHolds: [...selectedHolds, hold],\n          });\n        }\n      }\n    });\n  }\n\n  saveProblem(problem) {\n    const { createProblem } = this.props;\n\n    createProblem(problem);\n\n    this.setState({\n      selectedHolds: [],\n      wallKey: this.state.wallKey + 1, //TODO: hack to force rerender, refactor\n    });\n  }\n\n  render() {\n    const { selectedHolds, wallKey } = this.state;\n\n    return (\n      <ProblemEditor\n        selectedHolds={selectedHolds}\n        wallKey={wallKey}\n        addHold={this.addHold}\n        saveProblem={this.saveProblem}\n      />\n    );\n  }\n}\n\nexport default ProblemEditorContainer;\n","export const inside = (point, vs) => {\n  const x = point.x,\n    y = point.y;\n\n  let inside = false;\n  for (let i = 0, j = vs.length - 1; i < vs.length; j = i++) {\n    const xi = vs[i].x,\n      yi = vs[i].y;\n    const xj = vs[j].x,\n      yj = vs[j].y;\n\n    // eslint-disable-next-line\n    const intersect = yi > y !== yj > y && x < ((xj - xi) * (y - yi)) / (yj - yi) + xi;\n    if (intersect) inside = !inside;\n  }\n\n  return inside;\n};\n","import React from 'react';\nimport Board from './Board';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n    flexWrap: 'wrap',\n    justifyContent: 'space-around',\n    overflow: 'hidden',\n    backgroundColor: theme.palette.background.paper,\n  },\n  card: {\n    position: 'relative',\n    marginBottom: '50px',\n    display: 'inline-block',\n    backgroundColor: 'black',\n  },\n  overlay: {\n    position: 'absolute',\n    bottom: '0',\n    left: '0',\n    width: '100%',\n    color: 'white',\n    backgroundColor: 'black',\n    opacity: 0.6,\n  },\n  description: {\n    padding: '10px 10px 10px 10px',\n  },\n}));\n\nconst ProblemList = ({ problems }) => {\n  const classes = useStyles();\n\n  if (problems.length === 0) {\n    return (\n      <div className={classes.root}>\n        <CssBaseline />\n        <Container maxWidth=\"sm\">\n          <div className={classes.root}>No problems created yet</div>\n        </Container>\n      </div>\n    );\n  }\n\n  return (\n    <div className={classes.root}>\n      <CssBaseline />\n      <Container maxWidth=\"sm\">\n        {problems.map(({ holds, name, grade, author }) => (\n          <div key={name} className={classes.card}>\n            <Board holds={holds} />\n            <div className={classes.overlay}>\n              <div className={classes.description}>\n                <Typography variant=\"h5\">{`${name} ${grade}`}</Typography>\n                <Typography variant=\"body1\">{`by: ${author}`}</Typography>\n              </div>\n            </div>\n          </div>\n        ))}\n      </Container>\n    </div>\n  );\n};\n\nexport default ProblemList;\n","import React from 'react';\n\nimport Board from './Board';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { Button } from '@material-ui/core';\n\nimport Container from '@material-ui/core/Container';\nimport CssBaseline from '@material-ui/core/CssBaseline';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n    flexWrap: 'wrap',\n    justifyContent: 'space-around',\n    overflow: 'hidden',\n    backgroundColor: theme.palette.background.paper,\n  },\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120,\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2),\n  },\n}));\n\nconst BoardEditor = ({ holds, handleClick, createHold, saveBoard }) => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n      <CssBaseline />\n      <Container maxWidth=\"sm\">\n        <div className=\"home-wall\">\n          <Board onClick={handleClick} holds={holds} />\n        </div>\n        <Button\n          className={classes.formControl}\n          variant=\"contained\"\n          color=\"secondary\"\n          onClick={createHold}\n        >\n          Create hold\n        </Button>\n\n        <Button\n          className={classes.formControl}\n          variant=\"contained\"\n          color=\"primary\"\n          onClick={saveBoard}\n        >\n          Save board\n        </Button>\n      </Container>\n    </div>\n  );\n};\n\nclass BoardEditorContainer extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      points: [],\n      holds: [],\n    };\n\n    this.handleClick = this.handleClick.bind(this);\n    this.createHold = this.createHold.bind(this);\n  }\n\n  handleClick({ x, y }) {\n    this.setState({\n      points: [...this.state.points, { x, y }],\n    });\n  }\n\n  createHold() {\n    const { points } = this.state;\n\n    if (points.length < 3) {\n      return;\n    }\n\n    this.setState({\n      holds: [...this.state.holds, points],\n      points: [],\n    });\n  }\n\n  render() {\n    const { updateHolds } = this.props;\n\n    return (\n      <BoardEditor\n        holds={this.state.holds}\n        handleClick={this.handleClick}\n        createHold={this.createHold}\n        saveBoard={() => updateHolds(this.state.holds)}\n      />\n    );\n  }\n}\n\nexport default BoardEditorContainer;\n","import React from 'react';\nimport { fetchHolds, fetchProblems, upsertHolds, createProblem } from '../api/HomeWallApi';\nimport ProblemEditor from './ProblemEditor';\nimport ProblemList from './ProblemList';\nimport BoardEditor from './BoardEditor';\n\nimport CreateIcon from '@material-ui/icons/Create';\nimport AppBar from '@material-ui/core/AppBar';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Divider from '@material-ui/core/Divider';\nimport Drawer from '@material-ui/core/Drawer';\nimport Hidden from '@material-ui/core/Hidden';\nimport IconButton from '@material-ui/core/IconButton';\nimport ListIcon from '@material-ui/icons/List';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\n\nconst drawerWidth = 240;\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n  },\n  drawer: {\n    [theme.breakpoints.up('sm')]: {\n      width: drawerWidth,\n      flexShrink: 0,\n    },\n  },\n  appBar: {\n    [theme.breakpoints.up('sm')]: {\n      width: `calc(100% - ${drawerWidth}px)`,\n      marginLeft: drawerWidth,\n    },\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n    [theme.breakpoints.up('sm')]: {\n      display: 'none',\n    },\n  },\n  toolbar: theme.mixins.toolbar,\n  drawerPaper: {\n    width: drawerWidth,\n  },\n  content: {\n    flexGrow: 1,\n    padding: theme.spacing(3),\n  },\n}));\n\nconst SideBar = ({ page, setPage }) => {\n  const classes = useStyles();\n\n  return (\n    <div>\n      <div className={classes.toolbar} />\n      <Divider />\n      <List>\n        <ListItem button onClick={() => setPage('create')} selected={page === 'create'}>\n          <ListItemIcon>\n            <CreateIcon />\n          </ListItemIcon>\n          <ListItemText primary={'Create problem'} />\n        </ListItem>\n        <ListItem button onClick={() => setPage('list')} selected={page === 'list'}>\n          <ListItemIcon>\n            <ListIcon />\n          </ListItemIcon>\n          <ListItemText primary={'Existing problems'} />\n        </ListItem>\n      </List>\n    </div>\n  );\n};\n\nconst TopBar = ({ fullWidth = false, handleDrawerToggle }) => {\n  const classes = useStyles();\n\n  return (\n    <div>\n      <AppBar position=\"fixed\" className={fullWidth ? null : classes.appBar}>\n        <Toolbar>\n          <IconButton\n            color=\"inherit\"\n            aria-label=\"open drawer\"\n            edge=\"start\"\n            onClick={handleDrawerToggle}\n            className={classes.menuButton}\n          >\n            <MenuIcon />\n          </IconButton>\n          <Typography variant=\"h6\" noWrap>\n            Home Wall\n          </Typography>\n        </Toolbar>\n      </AppBar>\n    </div>\n  );\n};\n\nconst HomeWall = ({ problems, holds, createProblem, loading, updateHolds }) => {\n  const classes = useStyles();\n  const theme = useTheme();\n\n  const [mobileOpen, setMobileOpen] = React.useState(false);\n  const [page, setPage] = React.useState('list');\n\n  const handleDrawerToggle = () => {\n    setMobileOpen(!mobileOpen);\n  };\n\n  if (holds.length === 0) {\n    return (\n      <div className={classes.root}>\n        <CssBaseline />\n        <TopBar handleDrawerToggle={handleDrawerToggle} fullWidth />\n        <main className={classes.content}>\n          <div className={classes.toolbar} />\n          {!loading && <BoardEditor updateHolds={updateHolds} />}\n        </main>\n      </div>\n    );\n  }\n\n  return (\n    <div className={classes.root}>\n      <CssBaseline />\n      <TopBar handleDrawerToggle={handleDrawerToggle} />\n\n      <nav className={classes.drawer} aria-label=\"mailbox folders\">\n        <Hidden smUp implementation=\"css\">\n          <Drawer\n            variant=\"temporary\"\n            anchor={theme.direction === 'rtl' ? 'right' : 'left'}\n            open={mobileOpen}\n            onClose={handleDrawerToggle}\n            classes={{\n              paper: classes.drawerPaper,\n            }}\n            ModalProps={{\n              keepMounted: true,\n            }}\n          >\n            <SideBar\n              setPage={(updatedPage) => {\n                setPage(updatedPage);\n                setMobileOpen(false);\n              }}\n            />\n          </Drawer>\n        </Hidden>\n        <Hidden xsDown implementation=\"css\">\n          <Drawer\n            classes={{\n              paper: classes.drawerPaper,\n            }}\n            variant=\"permanent\"\n            open\n          >\n            <SideBar page={page} setPage={setPage} />\n          </Drawer>\n        </Hidden>\n      </nav>\n      <main className={classes.content}>\n        <div className={classes.toolbar} />\n        {page === 'list' && <ProblemList problems={problems} />}\n        {page === 'create' && <ProblemEditor allHolds={holds} createProblem={createProblem} />}\n      </main>\n    </div>\n  );\n};\n\nclass HomeWallContainer extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      loading: true,\n      holds: [],\n      problems: [],\n    };\n\n    this.updateHolds = this.updateHolds.bind(this);\n    this.createProblem = this.createProblem.bind(this);\n  }\n\n  componentDidMount() {\n    fetchProblems().then((problems) => {\n      fetchHolds().then((holds) =>\n        this.setState({\n          problems,\n          holds: holds,\n          loading: false,\n        }),\n      );\n    });\n  }\n\n  createProblem(problem) {\n    createProblem(problem).then((createdProblem) =>\n      this.setState({\n        problems: [createdProblem, ...this.state.problems],\n      }),\n    );\n  }\n\n  updateHolds(holds) {\n    upsertHolds(holds).then((holds) =>\n      this.setState({\n        holds,\n      }),\n    );\n  }\n\n  render() {\n    return (\n      <HomeWall\n        problems={this.state.problems}\n        holds={this.state.holds}\n        createProblem={this.createProblem}\n        updateHolds={this.updateHolds}\n        loading={this.state.loading}\n      />\n    );\n  }\n}\n\nexport default HomeWallContainer;\n","import '../css/App.css';\n\nimport HomeWall from './components/HomeWall';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <HomeWall />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './css/index.css';\nimport App from './js/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}